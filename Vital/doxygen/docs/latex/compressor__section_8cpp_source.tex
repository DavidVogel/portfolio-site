\doxysection{compressor\+\_\+section.\+cpp}
\hypertarget{compressor__section_8cpp_source}{}\label{compressor__section_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_sections/compressor\_section.cpp@{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_sections/compressor\_section.cpp}}
\mbox{\hyperlink{compressor__section_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{compressor__section_8h}{compressor\_section.h}}"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{compressor_8h}{compressor.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{compressor__editor_8h}{compressor\_editor.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{skin_8h}{skin.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{fonts_8h}{fonts.h}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__button_8h}{synth\_button.h}}"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__slider_8h}{synth\_slider.h}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{text__look__and__feel_8h}{text\_look\_and\_feel.h}}"{}}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \mbox{\hyperlink{class_compressor_section_a0b39295bad570f8b392ac80b73944563}{CompressorSection::CompressorSection}}(\textcolor{keyword}{const}\ String\&\ name)\ :\ \mbox{\hyperlink{class_synth_section}{SynthSection}}(name)\ \{}
\DoxyCodeLine{00015\ \ \ release\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_release"{}});}
\DoxyCodeLine{00016\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(release\_.get());}
\DoxyCodeLine{00017\ \ \ release\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ mix\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_mix"{}});}
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(mix\_.get());}
\DoxyCodeLine{00021\ \ \ mix\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ attack\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_attack"{}});}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(attack\_.get());}
\DoxyCodeLine{00025\ \ \ attack\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ low\_gain\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_low\_gain"{}});}
\DoxyCodeLine{00028\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(low\_gain\_.get());}
\DoxyCodeLine{00029\ \ \ low\_gain\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00030\ \ \ low\_gain\_-\/>setBipolar(\textcolor{keyword}{true});}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ band\_gain\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_band\_gain"{}});}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(band\_gain\_.get());}
\DoxyCodeLine{00034\ \ \ band\_gain\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00035\ \ \ band\_gain\_-\/>setBipolar(\textcolor{keyword}{true});}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ high\_gain\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}compressor\_high\_gain"{}});}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(high\_gain\_.get());}
\DoxyCodeLine{00039\ \ \ high\_gain\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00040\ \ \ high\_gain\_-\/>setBipolar(\textcolor{keyword}{true});}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ enabled\_bands\_\ =\ std::make\_unique<TextSelector>(\textcolor{stringliteral}{"{}compressor\_enabled\_bands"{}});}
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(enabled\_bands\_.get());}
\DoxyCodeLine{00044\ \ \ enabled\_bands\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00045\ \ \ enabled\_bands\_-\/>setLookAndFeel(\mbox{\hyperlink{class_text_look_and_feel_a3723dc598c94042165d4981963649828}{TextLookAndFeel::instance}}());}
\DoxyCodeLine{00046\ \ \ enabled\_bands\_-\/>setLongStringLookup(\mbox{\hyperlink{namespacestrings_ab94762c752397d75d56ae168922eb07b}{strings::kCompressorBandNames}});}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ compressor\_editor\_\ =\ std::make\_unique<CompressorEditor>();}
\DoxyCodeLine{00049\ \ \ addAndMakeVisible(compressor\_editor\_.get());}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{class_synth_section_ab9933100200451490f83536ded0ba9f7}{addOpenGlComponent}}(compressor\_editor\_.get());}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ on\_\ =\ std::make\_unique<SynthButton>(\textcolor{stringliteral}{"{}compressor\_on"{}});}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{class_synth_section_a98013478e89ec21a3e488d2d81594f24}{addButton}}(on\_.get());}
\DoxyCodeLine{00054\ \ \ \mbox{\hyperlink{class_synth_section_aabf4f96c8241d9fb729c782e144dbee1}{setActivator}}(on\_.get());}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{class_synth_section_ae4b092420f64f8d195dd2fdb406bfccf}{setSkinOverride}}(\mbox{\hyperlink{class_skin_aad31f2acbd13c67945c35857d1627c96a1025f40f38e1e7197fe0b07f6e7f211e}{Skin::kCompressor}});}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \mbox{\hyperlink{class_compressor_section_a2aa134963001ecbee286755d330f8fa3}{CompressorSection::\string~CompressorSection}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_compressor_section_a4360699f66f2c761977825abfe9b2270}{CompressorSection::paintBackground}}(Graphics\&\ g)\ \{}
\DoxyCodeLine{00062\ \ \ \mbox{\hyperlink{class_synth_section_aab234ab666f00b51df3dbf374a8a4e7d}{SynthSection::paintBackground}}(g);}
\DoxyCodeLine{00063\ \ \ \mbox{\hyperlink{class_synth_section_a87c021454e2c5d2207afa28af959a1fe}{setLabelFont}}(g);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \mbox{\hyperlink{class_synth_section_a03c774195fa401025d90987b176e4614}{drawTextComponentBackground}}(g,\ enabled\_bands\_-\/>getBounds(),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}MODE"{}}),\ enabled\_bands\_.get(),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00067\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}ATTACK"{}}),\ attack\_.get());}
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}RELEASE"{}}),\ release\_.get());}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}MIX"{}}),\ mix\_.get());}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}LOW"{}}),\ low\_gain\_.get());}
\DoxyCodeLine{00071\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}BAND"{}}),\ band\_gain\_.get());}
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}HIGH"{}}),\ high\_gain\_.get());}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_compressor_section_a7cc5d625079e71a7cee902ff4c860a0d}{CompressorSection::resized}}()\ \{}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{int}\ widget\_margin\ =\ \mbox{\hyperlink{class_synth_section_aa01a2cf1cb512707d217490aa89a8b2f}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180a045e9e21484c2d32d7835f44c7c161f9}{Skin::kWidgetMargin}});}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordtype}{int}\ title\_width\ =\ \mbox{\hyperlink{class_synth_section_ae0397399d283628b325650e0b7b60c6f}{getTitleWidth}}();}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordtype}{int}\ section\_height\ =\ \mbox{\hyperlink{class_synth_section_aab9bab4cc6657d3836887da39dc57e63}{getKnobSectionHeight}}();}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ Rectangle<int>\ bounds\ =\ getLocalBounds().withLeft(title\_width);}
\DoxyCodeLine{00081\ \ \ Rectangle<int>\ knobs\_area\ =\ \mbox{\hyperlink{class_synth_section_a009968441fdef3138c8bde380095116e}{getDividedAreaBuffered}}(bounds,\ 3,\ 0,\ widget\_margin);}
\DoxyCodeLine{00082\ \ \ Rectangle<int>\ time\_area\ =\ \mbox{\hyperlink{class_synth_section_acf0166ed98086c56c4f55b9f269204bb}{getDividedAreaUnbuffered}}(bounds,\ 6,\ 5,\ widget\_margin);}
\DoxyCodeLine{00083\ \ \ Rectangle<int>\ settings\_area\ =\ \mbox{\hyperlink{class_synth_section_acf0166ed98086c56c4f55b9f269204bb}{getDividedAreaUnbuffered}}(bounds,\ 3,\ 0,\ widget\_margin);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{int}\ editor\_x\ =\ knobs\_area.getRight();}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{int}\ editor\_width\ =\ time\_area.getX()\ -\/\ editor\_x\ -\/\ widget\_margin;}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordtype}{int}\ knob\_y2\ =\ section\_height\ -\/\ widget\_margin;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \mbox{\hyperlink{class_synth_section_a16e740094fb526018b139749cb6543c0}{placeKnobsInArea}}(Rectangle<int>(knobs\_area.getX(),\ knob\_y2,\ knobs\_area.getWidth(),\ section\_height),}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ low\_gain\_.get(),\ band\_gain\_.get(),\ high\_gain\_.get()\ \});}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{keywordtype}{int}\ bands\_width\ =\ band\_gain\_-\/>getRight()\ -\/\ low\_gain\_-\/>getX();}
\DoxyCodeLine{00093\ \ \ enabled\_bands\_-\/>setBounds(settings\_area.getX(),\ widget\_margin,\ bands\_width,\ section\_height\ -\/\ 2\ *\ widget\_margin);}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordtype}{int}\ mix\_x\ =\ enabled\_bands\_-\/>getRight();}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{class_synth_section_a16e740094fb526018b139749cb6543c0}{placeKnobsInArea}}(Rectangle<int>(mix\_x,\ 0,\ knobs\_area.getRight()\ -\/\ mix\_x,\ section\_height),\ \{\ mix\_.get()\ \});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ attack\_-\/>setBounds(time\_area.getX(),\ 0,\ time\_area.getWidth(),\ section\_height\ -\/\ widget\_margin);}
\DoxyCodeLine{00098\ \ \ release\_-\/>setBounds(time\_area.getX(),\ knob\_y2,\ time\_area.getWidth(),\ section\_height\ -\/\ widget\_margin);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keywordtype}{int}\ editor\_height\ =\ getHeight()\ -\/\ 2\ *\ widget\_margin;}
\DoxyCodeLine{00101\ \ \ compressor\_editor\_-\/>setBounds(editor\_x,\ widget\_margin,\ editor\_width,\ editor\_height);}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \mbox{\hyperlink{class_synth_section_a549f91a2b81b419368a578990cb2e6c2}{SynthSection::resized}}();}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_compressor_section_a13479427a997e9ee129851371b81f922}{CompressorSection::setAllValues}}(\mbox{\hyperlink{namespacevital_aa714e9b3957a28c9eaf0105959aea482}{vital::control\_map}}\&\ controls)\ \{}
\DoxyCodeLine{00107\ \ \ \mbox{\hyperlink{class_synth_section_acb4d78d85add51ee11fe4ca8bdb2cdb5}{SynthSection::setAllValues}}(controls);}
\DoxyCodeLine{00108\ \ \ compressor\_editor\_-\/>setAllValues(controls);}
\DoxyCodeLine{00109\ \ \ setCompressorActiveBands();}
\DoxyCodeLine{00110\ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_compressor_section_ac626030bbbe10c20d0c97946154de5a8}{CompressorSection::setActive}}(\textcolor{keywordtype}{bool}\ active)\ \{}
\DoxyCodeLine{00113\ \ \ \mbox{\hyperlink{class_synth_section_a731aed83dc75720d2f2e3951ed5310ba}{SynthSection::setActive}}(active);}
\DoxyCodeLine{00114\ \ \ compressor\_editor\_-\/>setActive(active);}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_compressor_section_af49b51cffff245c605fbb5085692b68a}{CompressorSection::sliderValueChanged}}(Slider*\ changed\_slider)\ \{}
\DoxyCodeLine{00118\ \ \ \textcolor{keywordflow}{if}\ (changed\_slider\ ==\ enabled\_bands\_.get())}
\DoxyCodeLine{00119\ \ \ \ \ setCompressorActiveBands();}
\DoxyCodeLine{00120\ \ \ \mbox{\hyperlink{class_synth_section_ac7ee059bb6a4e6592d6bd6538a757d6c}{SynthSection::sliderValueChanged}}(changed\_slider);}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keywordtype}{void}\ CompressorSection::setCompressorActiveBands()\ \{}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordtype}{int}\ enabled\_bands\ =\ enabled\_bands\_-\/>getValue();}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordtype}{bool}\ low\_enabled\ =\ enabled\_bands\ ==\ \mbox{\hyperlink{classvital_1_1_multiband_compressor_af96095570341cf5a6feee506e6e50bdaa40722039a451be32b3478ef368ebf57a}{vital::MultibandCompressor::kLowBand}}\ ||}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enabled\_bands\ ==\ \mbox{\hyperlink{classvital_1_1_multiband_compressor_af96095570341cf5a6feee506e6e50bdaa9b25ed09ae5651d28ea5c3440da25d6a}{vital::MultibandCompressor::kMultiband}};}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordtype}{bool}\ high\_enabled\ =\ enabled\_bands\ ==\ \mbox{\hyperlink{classvital_1_1_multiband_compressor_af96095570341cf5a6feee506e6e50bdaa18ea48657b6c6729a276c9632c849d51}{vital::MultibandCompressor::kHighBand}}\ ||}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enabled\_bands\ ==\ \mbox{\hyperlink{classvital_1_1_multiband_compressor_af96095570341cf5a6feee506e6e50bdaa9b25ed09ae5651d28ea5c3440da25d6a}{vital::MultibandCompressor::kMultiband}};}
\DoxyCodeLine{00129\ \ \ compressor\_editor\_-\/>setLowBandActive(low\_enabled);}
\DoxyCodeLine{00130\ \ \ compressor\_editor\_-\/>setHighBandActive(high\_enabled);}
\DoxyCodeLine{00131\ \ \ low\_gain\_-\/>setActive(low\_enabled);}
\DoxyCodeLine{00132\ \ \ high\_gain\_-\/>setActive(high\_enabled);}
\DoxyCodeLine{00133\ \}}

\end{DoxyCode}
