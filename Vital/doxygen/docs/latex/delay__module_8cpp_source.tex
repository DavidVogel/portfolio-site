\doxysection{delay\+\_\+module.\+cpp}
\hypertarget{delay__module_8cpp_source}{}\label{delay__module_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/delay\_module.cpp@{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/delay\_module.cpp}}
\mbox{\hyperlink{delay__module_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{delay__module_8h}{delay\_module.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{delay_8h}{delay.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{memory_8h}{memory.h}}"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacevital}{vital}}\ \{}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a482368e77a9e78b3e9627d33e1b4be4e}{DelayModule::DelayModule}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ beats\_per\_second)\ :\ \mbox{\hyperlink{classvital_1_1_synth_module}{SynthModule}}(0,\ 1),\ beats\_per\_second\_(beats\_per\_second)\ \{}
\DoxyCodeLine{00009\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ size\ =\ \mbox{\hyperlink{classvital_1_1_delay_module_a7ae1f632788961a9ff632b690ba9a5d7}{kMaxDelayTime}}\ *\ \mbox{\hyperlink{classvital_1_1_processor_a70822ba483c1a6528f1809621befd4b8}{getSampleRate}}();}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Initialize\ delay\ with\ max\ possible\ delay\ samples.}}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{namespacevital_a4534ce348c7f6fad2c5ed92c897cdf91}{StereoDelay}}(size);}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_router_a8bc90b699c1ec299b060ed0df32f476c}{addIdleProcessor}}(\mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}});}
\DoxyCodeLine{00013\ \ \ \ \ \}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_ace184eb8d373963f694af0fd9a2609e0}{DelayModule::\string~DelayModule}}()\ \{\ \}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_delay_module_ae943ef4bcdcac337bf37d9a037c8d33f}{DelayModule::init}}()\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a4ab8d1bebcc9b45ae4eefb1f0ea20d77}{useOutput}}(\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ mod\ controls\ and\ tempo\ sync\ switches\ for\ delay\ parameters.}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ free\_frequency\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_frequency"{}});}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ frequency\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_aa506e525d7867019f7412715346ff7a8}{createTempoSyncSwitch}}(\textcolor{stringliteral}{"{}delay"{}},\ free\_frequency-\/>\mbox{\hyperlink{structvital_1_1_output_a2a95c52370b24f681a552dd9bfa6cc86}{owner}},\ \mbox{\hyperlink{classvital_1_1_delay_module_a5e685f0c82f57961cf560ba266693a8a}{beats\_per\_second\_}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ free\_frequency\_aux\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_aux\_frequency"{}});}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ frequency\_aux\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_aa506e525d7867019f7412715346ff7a8}{createTempoSyncSwitch}}(\textcolor{stringliteral}{"{}delay\_aux"{}},\ free\_frequency\_aux-\/>\mbox{\hyperlink{structvital_1_1_output_a2a95c52370b24f681a552dd9bfa6cc86}{owner}},\ \mbox{\hyperlink{classvital_1_1_delay_module_a5e685f0c82f57961cf560ba266693a8a}{beats\_per\_second\_}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ feedback\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_feedback"{}});}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ wet\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_dry\_wet"{}});}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ filter\_cutoff\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_filter\_cutoff"{}});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ filter\_spread\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}delay\_filter\_spread"{}});}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ style\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}delay\_style"{}});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Plug\ parameters\ into\ the\ StereoDelay\ processor.}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(frequency,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157a193adbe601a5649f24ac21658bd76ba0}{StereoDelay::kFrequency}});}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(frequency\_aux,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157aece5f7ad30369630237a39a4a32ba583}{StereoDelay::kFrequencyAux}});}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(feedback,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157a25d008b0c6c3fdf8d27962aef2f0adac}{StereoDelay::kFeedback}});}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(wet,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157a98deb2a1df2f0d410259d94b767b5353}{StereoDelay::kWet}});}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(style,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157ae8482225d4537a9a8981f8d4d3518128}{StereoDelay::kStyle}});}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(filter\_cutoff,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157aaf77f459b3a43a8f8bbed47171da0f23}{StereoDelay::kFilterCutoff}});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(filter\_spread,\ \mbox{\hyperlink{classvital_1_1_delay_a67b4dd39c442c6e7f0bc25d89e3d7157adb48624bc9b9173a2780c17d337f2388}{StereoDelay::kFilterSpread}});}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_adb6eaa40b95275a42029ed4c0c4bcba4}{SynthModule::init}}();}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_delay_module_a1f59bc14656345d6fbfcae539123b8bd}{DelayModule::setSampleRate}}(\textcolor{keywordtype}{int}\ sample\_rate)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ac778f37e9b9e3c1c05fca568e8f8664c}{SynthModule::setSampleRate}}(sample\_rate);}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_ac778f37e9b9e3c1c05fca568e8f8664c}{setSampleRate}}(sample\_rate);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_delay_a80a69a08d41a88b0981f1c679dffba21}{setMaxSamples}}(\mbox{\hyperlink{classvital_1_1_delay_module_a7ae1f632788961a9ff632b690ba9a5d7}{kMaxDelayTime}}\ *\ \mbox{\hyperlink{classvital_1_1_processor_a70822ba483c1a6528f1809621befd4b8}{getSampleRate}}());}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_delay_module_af4f22a576f8f64113273e4b7bcd0b148}{DelayModule::setOversampleAmount}}(\textcolor{keywordtype}{int}\ oversample)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_a2684da3687deca092882748cf170eac7}{SynthModule::setOversampleAmount}}(oversample);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_delay_a80a69a08d41a88b0981f1c679dffba21}{setMaxSamples}}(\mbox{\hyperlink{classvital_1_1_delay_module_a7ae1f632788961a9ff632b690ba9a5d7}{kMaxDelayTime}}\ *\ \mbox{\hyperlink{classvital_1_1_processor_a70822ba483c1a6528f1809621befd4b8}{getSampleRate}}());}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_delay_module_a5586f5260ec44bb557f031b755c9cbb0}{DelayModule::processWithInput}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structvital_1_1poly__float}{poly\_float}}*\ audio\_in,\ \textcolor{keywordtype}{int}\ num\_samples)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_aa88622055da34fca35bb4192d524dd9d}{SynthModule::process}}(num\_samples);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_delay_module_a7f125c5a72d444bd478a1c19c9913ded}{delay\_}}-\/>\mbox{\hyperlink{classvital_1_1_delay_a350d2584edae89297ea07b32a67ccd94}{processWithInput}}(audio\_in,\ num\_samples);}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \}\ \textcolor{comment}{//\ namespace\ vital}}

\end{DoxyCode}
