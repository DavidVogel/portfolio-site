\doxysection{portamento\+\_\+section.\+cpp}
\hypertarget{portamento__section_8cpp_source}{}\label{portamento__section_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_sections/portamento\_section.cpp@{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_sections/portamento\_section.cpp}}
\mbox{\hyperlink{portamento__section_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{portamento__section_8h}{portamento\_section.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{fonts_8h}{fonts.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__strings_8h}{synth\_strings.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__button_8h}{synth\_button.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__slider_8h}{synth\_slider.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{text__look__and__feel_8h}{text\_look\_and\_feel.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{curve__look__and__feel_8h}{curve\_look\_and\_feel.h}}"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \mbox{\hyperlink{class_portamento_section_ad4fbfb204c597ab6a0ee799a37663700}{PortamentoSection::PortamentoSection}}(String\ name)\ :\ \mbox{\hyperlink{class_synth_section}{SynthSection}}(name)\ \{}
\DoxyCodeLine{00011\ \ \ \textcolor{comment}{//\ Create\ and\ configure\ the\ portamento\ time\ slider.}}
\DoxyCodeLine{00012\ \ \ portamento\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}portamento\_time"{}});}
\DoxyCodeLine{00013\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(portamento\_.get());}
\DoxyCodeLine{00014\ \ \ portamento\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \textcolor{comment}{//\ Create\ and\ configure\ the\ portamento\ slope\ slider.}}
\DoxyCodeLine{00017\ \ \ portamento\_slope\_\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}portamento\_slope"{}});}
\DoxyCodeLine{00018\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(portamento\_slope\_.get());}
\DoxyCodeLine{00019\ \ \ portamento\_slope\_-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00020\ \ \ portamento\_slope\_-\/>setLookAndFeel(\mbox{\hyperlink{class_curve_look_and_feel_af6028cf5c3b146cd26458bcb53ec01a6}{CurveLookAndFeel::instance}}());}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \textcolor{comment}{//\ Button\ to\ toggle\ octave\ scaling\ of\ portamento.}}
\DoxyCodeLine{00023\ \ \ portamento\_scale\_\ =\ std::make\_unique<SynthButton>(\textcolor{stringliteral}{"{}portamento\_scale"{}});}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{class_synth_section_a98013478e89ec21a3e488d2d81594f24}{addButton}}(portamento\_scale\_.get());}
\DoxyCodeLine{00025\ \ \ portamento\_scale\_-\/>setButtonText(\textcolor{stringliteral}{"{}OCTAVE\ SCALE"{}});}
\DoxyCodeLine{00026\ \ \ portamento\_scale\_-\/>setLookAndFeel(\mbox{\hyperlink{class_text_look_and_feel_a3723dc598c94042165d4981963649828}{TextLookAndFeel::instance}}());}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \textcolor{comment}{//\ Button\ to\ force\ glide\ always\ on\ notes.}}
\DoxyCodeLine{00029\ \ \ portamento\_force\_\ =\ std::make\_unique<SynthButton>(\textcolor{stringliteral}{"{}portamento\_force"{}});}
\DoxyCodeLine{00030\ \ \ \mbox{\hyperlink{class_synth_section_a98013478e89ec21a3e488d2d81594f24}{addButton}}(portamento\_force\_.get());}
\DoxyCodeLine{00031\ \ \ portamento\_force\_-\/>setButtonText(\textcolor{stringliteral}{"{}ALWAYS\ GLIDE"{}});}
\DoxyCodeLine{00032\ \ \ portamento\_force\_-\/>setLookAndFeel(\mbox{\hyperlink{class_text_look_and_feel_a3723dc598c94042165d4981963649828}{TextLookAndFeel::instance}}());}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ Button\ to\ enable\ legato\ mode.}}
\DoxyCodeLine{00035\ \ \ legato\_\ =\ std::make\_unique<SynthButton>(\textcolor{stringliteral}{"{}legato"{}});}
\DoxyCodeLine{00036\ \ \ legato\_-\/>setButtonText(\textcolor{stringliteral}{"{}LEGATO"{}});}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{class_synth_section_a98013478e89ec21a3e488d2d81594f24}{addButton}}(legato\_.get());}
\DoxyCodeLine{00038\ \ \ legato\_-\/>setLookAndFeel(\mbox{\hyperlink{class_text_look_and_feel_a3723dc598c94042165d4981963649828}{TextLookAndFeel::instance}}());}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{class_synth_section_ae4b092420f64f8d195dd2fdb406bfccf}{setSkinOverride}}(\mbox{\hyperlink{class_skin_aad31f2acbd13c67945c35857d1627c96a3f9475f215a010100493fcc9e848c3bf}{Skin::kKeyboard}});}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \mbox{\hyperlink{class_portamento_section_a09cbebcc07085f6ddd7b69da29e4a7b1}{PortamentoSection::\string~PortamentoSection}}()\ \{\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_portamento_section_a52fd27d9b4e5b7a45a47e04d226099ae}{PortamentoSection::paintBackground}}(Graphics\&\ g)\ \{}
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ Paint\ the\ main\ body\ and\ border.}}
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{class_synth_section_a5966e97ed0f688f9910f24a4f3bfa9ec}{paintBody}}(g);}
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{class_synth_section_aa0e18b52d386e2575c51e6e4f540b392}{paintBorder}}(g);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ Draw\ the\ portamento\ slider\ shadow.}}
\DoxyCodeLine{00051\ \ \ portamento\_-\/>drawShadow(g);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{comment}{//\ Set\ label\ font\ and\ draw\ labels\ for\ controls.}}
\DoxyCodeLine{00054\ \ \ \mbox{\hyperlink{class_synth_section_a87c021454e2c5d2207afa28af959a1fe}{setLabelFont}}(g);}
\DoxyCodeLine{00055\ \ \ \mbox{\hyperlink{class_synth_section_a7f14dd38873d3b3a43d490201ff44eaf}{drawLabelForComponent}}(g,\ TRANS(\textcolor{stringliteral}{"{}GLIDE"{}}),\ portamento\_.get());}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ Rectangle<int>\ slope\_bounds\ =\ portamento\_slope\_-\/>getBounds().withBottom(getHeight()\ -\/\ \mbox{\hyperlink{class_synth_section_afe5de4142a66eb31ff00c178fc4188e0}{getWidgetMargin}}());}
\DoxyCodeLine{00058\ \ \ \mbox{\hyperlink{class_synth_section_a03c774195fa401025d90987b176e4614}{drawTextComponentBackground}}(g,\ slope\_bounds,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00059\ \ \ \mbox{\hyperlink{class_synth_section_a30c41b16dd66c5bc3c6552c84c72f67d}{drawLabel}}(g,\ TRANS(\textcolor{stringliteral}{"{}SLOPE"{}}),\ slope\_bounds,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{class_synth_section_a2744ac0e3ccb692bfe657238cdcafe30}{paintOpenGlChildrenBackgrounds}}(g);}
\DoxyCodeLine{00062\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_portamento_section_ace93c4e27d1640b41a6a18702c32eabb}{PortamentoSection::resized}}()\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{int}\ height\ =\ getHeight();}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordtype}{int}\ buttons\_width\ =\ 3\ *\ getWidth()\ /\ 8;}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{int}\ buttons\_x\ =\ getWidth()\ -\/\ buttons\_width;}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{int}\ widget\_margin\ =\ \mbox{\hyperlink{class_synth_section_aa01a2cf1cb512707d217490aa89a8b2f}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180a045e9e21484c2d32d7835f44c7c161f9}{Skin::kWidgetMargin}});}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{int}\ internal\_margin\ =\ widget\_margin\ /\ 2;}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{float}\ button\_height\ =\ (height\ -\/\ 2\ *\ (widget\_margin\ +\ internal\_margin))\ /\ 3.0f;}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ Position\ buttons\ in\ a\ column\ on\ the\ right\ side.}}
\DoxyCodeLine{00073\ \ \ portamento\_force\_-\/>setBounds(buttons\_x,\ widget\_margin,\ buttons\_width\ -\/\ widget\_margin,\ button\_height);}
\DoxyCodeLine{00074\ \ \ legato\_-\/>setBounds(buttons\_x,\ height\ -\/\ widget\_margin\ -\/\ button\_height,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buttons\_width\ -\/\ widget\_margin,\ button\_height);}
\DoxyCodeLine{00076\ \ \ portamento\_scale\_-\/>setBounds(buttons\_x,\ portamento\_force\_-\/>getBottom()\ +\ internal\_margin,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buttons\_width\ -\/\ widget\_margin,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ legato\_-\/>getY()\ -\/\ portamento\_force\_-\/>getBottom()\ -\/\ 2\ *\ internal\_margin);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Place\ knobs\ (sliders)\ on\ the\ left\ side.}}
\DoxyCodeLine{00081\ \ \ Rectangle<int>\ knobs\_bounds(0,\ 0,\ buttons\_x,\ height);}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{class_synth_section_a16e740094fb526018b139749cb6543c0}{placeKnobsInArea}}(knobs\_bounds,\ \{\ portamento\_.get(),\ portamento\_slope\_.get()\ \});}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ Rectangle<int>\ slope\_bounds\ =\ portamento\_slope\_-\/>getBounds().withTop(\mbox{\hyperlink{class_synth_section_afe5de4142a66eb31ff00c178fc4188e0}{getWidgetMargin}}());}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{int}\ bottom\ =\ \mbox{\hyperlink{class_synth_section_a988ae340fb5be83419a90fb6ab3e2c07}{getLabelBackgroundBounds}}(portamento\_slope\_-\/>getBounds(),\ \textcolor{keyword}{true}).getY();}
\DoxyCodeLine{00087\ \ \ portamento\_slope\_-\/>setBounds(slope\_bounds.withBottom(bottom));}
\DoxyCodeLine{00088\ \ \ \mbox{\hyperlink{class_synth_section_a549f91a2b81b419368a578990cb2e6c2}{SynthSection::resized}}();}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_portamento_section_a72cfc9aebfae0613ae50897c623946fa}{PortamentoSection::sliderValueChanged}}(Slider*\ changed\_slider)\ \{}
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{//\ If\ the\ portamento\ time\ changes,\ activate/deactivate\ slope\ control\ depending\ on\ the\ value.}}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{if}\ (changed\_slider\ ==\ portamento\_.get())}
\DoxyCodeLine{00094\ \ \ \ \ portamento\_slope\_-\/>setActive(portamento\_-\/>getValue()\ !=\ portamento\_-\/>getMinimum());}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \mbox{\hyperlink{class_synth_section_ac7ee059bb6a4e6592d6bd6538a757d6c}{SynthSection::sliderValueChanged}}(changed\_slider);}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_portamento_section_a370ece650638464951c02f95605f49ff}{PortamentoSection::setAllValues}}(\mbox{\hyperlink{namespacevital_aa714e9b3957a28c9eaf0105959aea482}{vital::control\_map}}\&\ controls)\ \{}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ Update\ all\ controls\ and\ active\ states\ based\ on\ incoming\ values.}}
\DoxyCodeLine{00101\ \ \ \mbox{\hyperlink{class_synth_section_acb4d78d85add51ee11fe4ca8bdb2cdb5}{SynthSection::setAllValues}}(controls);}
\DoxyCodeLine{00102\ \ \ portamento\_slope\_-\/>setActive(portamento\_-\/>getValue()\ !=\ portamento\_-\/>getMinimum());}
\DoxyCodeLine{00103\ \}}

\end{DoxyCode}
