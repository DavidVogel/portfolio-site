\doxysection{value\+\_\+switch.\+cpp}
\hypertarget{value__switch_8cpp_source}{}\label{value__switch_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/synthesis/utilities/value\_switch.cpp@{/Users/davidvogel/repos/VitalHelp/src/synthesis/utilities/value\_switch.cpp}}
\mbox{\hyperlink{value__switch_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{value__switch_8h}{value\_switch.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{utils_8h}{utils.h}}"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacevital}{vital}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value_switch_a774b0bd9648454637b6b9834544b5743}{ValueSwitch::ValueSwitch}}(\mbox{\hyperlink{namespacevital_afcc17475a10ef776bbd2f11b64c1ddfb}{mono\_float}}\ value)\ :\ cr::\mbox{\hyperlink{classvital_1_1_value}{Value}}(value)\ \{}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ensure\ both\ outputs\ (kValue,\ kSwitch)\ exist.}}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{classvital_1_1_processor_a0e3edbf7d0f35c163a6e8913c861beb7}{numOutputs}}()\ <\ \mbox{\hyperlink{classvital_1_1_value_switch_a8ac6342b35f6be2f4bd5036b39c6bea8a00669f558127dceaad9602ce3ed1b4c8}{kNumOutputs}})}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_aa6dfaa08c56142016d7bfb8985132c63}{addOutput}}();}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ By\ default,\ the\ ValueSwitch\ is\ not\ enabled\ since\ it\ simply}}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ passes\ through\ an\ input\ based\ on\ the\ set\ value.}}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ab5a6caa5b2e9cdfba5cf770363034d98}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00019\ \ \ \ \ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_value_switch_a957551d94c85ff987cc19bb70c2e3282}{ValueSwitch::set}}(\mbox{\hyperlink{structvital_1_1poly__float}{poly\_float}}\ value)\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value_a3441b8819fbaa1ee964700f72e76d223}{cr::Value::set}}(\mbox{\hyperlink{classvital_1_1_value_abb1c46e9f067933eed8c3af6b11d0b9a}{value}});}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ output\ source\ based\ on\ the\ first\ voice's\ integer\ value.}}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ setSource(\mbox{\hyperlink{classvital_1_1_value_abb1c46e9f067933eed8c3af6b11d0b9a}{value}}[0]);}
\DoxyCodeLine{00025\ \ \ \ \ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_value_switch_a8bc13ce29bd72c0b85ed7cd82290c322}{ValueSwitch::setOversampleAmount}}(\textcolor{keywordtype}{int}\ oversample)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_a2684da3687deca092882748cf170eac7}{cr::Value::setOversampleAmount}}(oversample);}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_inputs\ =\ \mbox{\hyperlink{classvital_1_1_processor_a11d86444fb2fb200b11d54b5602b6f18}{numInputs}}();}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ oversampling\ for\ all\ inputs'\ owners.}}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_inputs;\ ++i)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(i)-\/>\mbox{\hyperlink{structvital_1_1_input_adc691b9fd0f8c8c79c2a40e9e3314eaf}{source}}-\/>\mbox{\hyperlink{structvital_1_1_output_a2a95c52370b24f681a552dd9bfa6cc86}{owner}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a2684da3687deca092882748cf170eac7}{setOversampleAmount}}(oversample);}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ buffer\ to\ match\ the\ currently\ set\ value.}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ setBuffer(\mbox{\hyperlink{classvital_1_1_value_a6b15b1484cf9f4bb6eef84d732c65a2e}{value\_}}[0]);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{common_8h_ae8c57c7218a376f10cbdf0e50f1189ee}{force\_inline}}\ \textcolor{keywordtype}{void}\ ValueSwitch::setBuffer(\textcolor{keywordtype}{int}\ source)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clamp\ the\ source\ index\ to\ the\ available\ inputs.}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ source\ =\ \mbox{\hyperlink{namespacevital_1_1utils_a0096680ab20a53e9eade83f4f2ee1895}{utils::iclamp}}(source,\ 0,\ \mbox{\hyperlink{classvital_1_1_processor_a11d86444fb2fb200b11d54b5602b6f18}{numInputs}}()\ -\/\ 1);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Route\ the\ selected\ input\ buffer\ directly\ to\ the\ kSwitch\ output.}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_value_switch_a8ac6342b35f6be2f4bd5036b39c6bea8ad1451ff3ff3cb2253b2e571f27f3f460}{kSwitch}})-\/>\mbox{\hyperlink{structvital_1_1_output_a1bc2c3a75ee0525ecbfb24fc841b1fe4}{buffer}}\ =\ \mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(source)-\/>\mbox{\hyperlink{structvital_1_1_input_adc691b9fd0f8c8c79c2a40e9e3314eaf}{source}}-\/>\mbox{\hyperlink{structvital_1_1_output_a1bc2c3a75ee0525ecbfb24fc841b1fe4}{buffer}};}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_value_switch_a8ac6342b35f6be2f4bd5036b39c6bea8ad1451ff3ff3cb2253b2e571f27f3f460}{kSwitch}})-\/>\mbox{\hyperlink{structvital_1_1_output_a56a8b6494724ac9fc94fb1bc2974ae6d}{buffer\_size}}\ =\ \mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(source)-\/>\mbox{\hyperlink{structvital_1_1_input_adc691b9fd0f8c8c79c2a40e9e3314eaf}{source}}-\/>\mbox{\hyperlink{structvital_1_1_output_a56a8b6494724ac9fc94fb1bc2974ae6d}{buffer\_size}};}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{common_8h_ae8c57c7218a376f10cbdf0e50f1189ee}{force\_inline}}\ \textcolor{keywordtype}{void}\ ValueSwitch::setSource(\textcolor{keywordtype}{int}\ source)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ new\ buffer\ based\ on\ the\ source\ index.}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ setBuffer(source);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Enable\ or\ disable\ linked\ processors\ based\ on\ the\ chosen\ source.}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ enable\_processors\ =\ (source\ !=\ 0);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classvital_1_1_processor_a0ccc3140079d85c64283ad08414df5c1}{Processor}}*\ processor\ :\ processors\_)}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ processor-\/>enable(enable\_processors);}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ \}\ \textcolor{comment}{//\ namespace\ vital}}

\end{DoxyCode}
