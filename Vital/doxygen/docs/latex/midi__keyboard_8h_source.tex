\doxysection{midi\+\_\+keyboard.\+h}
\hypertarget{midi__keyboard_8h_source}{}\label{midi__keyboard_8h_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_components/midi\_keyboard.h@{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_components/midi\_keyboard.h}}
\mbox{\hyperlink{midi__keyboard_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}JuceHeader.h"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{open__gl__multi__quad_8h}{open\_gl\_multi\_quad.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__gui__interface_8h}{synth\_gui\_interface.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_midi_keyboard}{MidiKeyboard}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_open_gl_component}{OpenGlComponent}}\ \{}
\DoxyCodeLine{00018\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_midi_keyboard_a000dc40832797857d62058651c1d5d29}{kBlackKeyOffsets}}[];}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_midi_keyboard_a478847efbbb004139214cb04b0b7448e}{kWhiteKeys}}[];}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_midi_keyboard_a98299ed197fa5a38070ef82130477bb6}{kNumWhiteKeys}}\ =\ 75;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_midi_keyboard_ab8dc3d66469e4891ebba3eccf50d7289}{kNumWhiteKeysPerOctave}}\ =\ 7;}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_midi_keyboard_ae94957be3b47b58fd19e31dcda6deeb8}{kNumBlackKeys}}\ =\ \mbox{\hyperlink{namespacevital_a7be9efa423f42230b10924b0f69b3b03}{vital::kMidiSize}}\ -\/\ \mbox{\hyperlink{class_midi_keyboard_a98299ed197fa5a38070ef82130477bb6}{kNumWhiteKeys}};}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_midi_keyboard_a2caf247609329e686a0c23f5b67115d5}{kNumBlackKeysPerOctave}}\ =\ \mbox{\hyperlink{namespacevital_a536eae8e1b7eab087dc163b9911bca6e}{vital::kNotesPerOctave}}\ -\/\ \mbox{\hyperlink{class_midi_keyboard_ab8dc3d66469e4891ebba3eccf50d7289}{kNumWhiteKeysPerOctave}};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_midi_keyboard_ad1cb37d31bd235c0c04a9fd17d5c2e89}{kBlackKeyHeightRatio}}\ =\ 0.7f;}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_midi_keyboard_ad07e4cb437535d56a4fae7dc3329343c}{kBlackKeyWidthRatio}}\ =\ 0.8f;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{common_8h_ae8c57c7218a376f10cbdf0e50f1189ee}{force\_inline}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_midi_keyboard_a55ad01200c219ec2cd2ac8efe7a9029b}{isWhiteKey}}(\textcolor{keywordtype}{int}\ midi)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_midi_keyboard_a478847efbbb004139214cb04b0b7448e}{kWhiteKeys}}[midi\ \%\ \mbox{\hyperlink{namespacevital_a536eae8e1b7eab087dc163b9911bca6e}{vital::kNotesPerOctave}}];}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{class_midi_keyboard_afad0cec69321d53135a985a07b940539}{MidiKeyboard}}(MidiKeyboardState\&\ state);}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a5702b549682f3fa0c3c51ad8c5401ed4}{paintBackground}}(Graphics\&\ g)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a0baef1c11feab99810d37689e7207fcb}{parentHierarchyChanged}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_ab49fc360173e6d3fe400894abff11899}{resized}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(Point<float>\ position);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_midi_keyboard_ac43f007a6e0d1c9d05e8642d2263a9ee}{isBlackKeyHeight}}(Point<float>\ position)\ \{\ \textcolor{keywordflow}{return}\ position.y\ /\ getHeight()\ <\ \mbox{\hyperlink{class_midi_keyboard_ad1cb37d31bd235c0c04a9fd17d5c2e89}{kBlackKeyHeightRatio}};\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_midi_keyboard_a1c6a6a20658629cbf5b47d2f288d503a}{getVelocityForNote}}(\textcolor{keywordtype}{int}\ midi,\ Point<float>\ position);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a02aeae14cbe0ffc695c17e807eccc29f}{init}}(\mbox{\hyperlink{struct_open_gl_wrapper}{OpenGlWrapper}}\&\ open\_gl)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ black\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a31f498198029a3ed8f8595dc470c2ba1}{init}}(open\_gl);}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ white\_pressed\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a31f498198029a3ed8f8595dc470c2ba1}{init}}(open\_gl);}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ black\_pressed\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a31f498198029a3ed8f8595dc470c2ba1}{init}}(open\_gl);}
\DoxyCodeLine{00113\ \ \ \ \ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_acbdd1140f440905040e0f025110dcca6}{render}}(\mbox{\hyperlink{struct_open_gl_wrapper}{OpenGlWrapper}}\&\ open\_gl,\ \textcolor{keywordtype}{bool}\ animate)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a9468fdea704933a98891e20e0b518c82}{setPressedKeyPositions}}();}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_aabaa02c4b7ed0a28855a218ed68a7634}{destroy}}(\mbox{\hyperlink{struct_open_gl_wrapper}{OpenGlWrapper}}\&\ open\_gl)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ black\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a6146637d83f818c11ddef6af7853e77e}{destroy}}(open\_gl);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ white\_pressed\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a6146637d83f818c11ddef6af7853e77e}{destroy}}(open\_gl);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ black\_pressed\_notes\_.\mbox{\hyperlink{class_open_gl_multi_quad_a6146637d83f818c11ddef6af7853e77e}{destroy}}(open\_gl);}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a63c6305032e18c64dbb35c7f7eae5dda}{mouseDown}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(e.position);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ state\_.noteOn(midi\_channel\_,\ hover\_note\_,\ \mbox{\hyperlink{class_midi_keyboard_a1c6a6a20658629cbf5b47d2f288d503a}{getVelocityForNote}}(hover\_note\_,\ e.position));}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_afdbd9dd8e66ceb4c6e265cc368e10745}{mouseUp}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ state\_.noteOff(midi\_channel\_,\ hover\_note\_,\ 0.0f);}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(e.position);}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a4ddd05e7048e7eccafdab767f94f5cfb}{mouseEnter}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(e.position);}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a3ec3a753751f25fe5827186ef2537b6f}{mouseExit}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ -\/1;}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_af9b082f722b7e01a07a4a81effccce80}{mouseDrag}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ note\ =\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(e.position);}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (note\ ==\ hover\_note\_)}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ state\_.noteOff(midi\_channel\_,\ hover\_note\_,\ 0.0f);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ state\_.noteOn(midi\_channel\_,\ note,\ \mbox{\hyperlink{class_midi_keyboard_a1c6a6a20658629cbf5b47d2f288d503a}{getVelocityForNote}}(note,\ e.position));}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ note;}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a852f571346ff0cc970e8ad39dbd0a091}{mouseMove}}(\textcolor{keyword}{const}\ MouseEvent\&\ e)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ hover\_note\_\ =\ \mbox{\hyperlink{class_midi_keyboard_a50760d67638d9feab76a11893063965f}{getNoteAtPosition}}(e.position);}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a140f73a0a40d12773fc85ae01df42e32}{setMidiChannel}}(\textcolor{keywordtype}{int}\ channel)\ \{\ midi\_channel\_\ =\ channel;\ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_midi_keyboard_a9cf8ed1068c679850ecd6aa0f29042e2}{setColors}}();}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{void}\ setWhiteKeyQuad(\mbox{\hyperlink{class_open_gl_multi_quad}{OpenGlMultiQuad}}*\ quads,\ \textcolor{keywordtype}{int}\ quad\_index,\ \textcolor{keywordtype}{int}\ white\_key\_index);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordtype}{void}\ setBlackKeyQuad(\mbox{\hyperlink{class_open_gl_multi_quad}{OpenGlMultiQuad}}*\ quads,\ \textcolor{keywordtype}{int}\ quad\_index,\ \textcolor{keywordtype}{int}\ black\_key\_index);}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ MidiKeyboardState\&\ state\_;\ }
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordtype}{int}\ midi\_channel\_;\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordtype}{int}\ hover\_note\_;\ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \mbox{\hyperlink{class_open_gl_multi_quad}{OpenGlMultiQuad}}\ black\_notes\_;\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00226\ \ \ \ \ \mbox{\hyperlink{class_open_gl_multi_quad}{OpenGlMultiQuad}}\ white\_pressed\_notes\_;\ }
\DoxyCodeLine{00227\ \ \ \ \ \mbox{\hyperlink{class_open_gl_multi_quad}{OpenGlMultiQuad}}\ black\_pressed\_notes\_;\ }
\DoxyCodeLine{00228\ \ \ \ \ \mbox{\hyperlink{class_open_gl_quad}{OpenGlQuad}}\ hover\_note\_quad\_;\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ Colour\ key\_press\_color\_;\ }
\DoxyCodeLine{00231\ \ \ \ \ Colour\ hover\_color\_;\ \ \ \ \ }
\DoxyCodeLine{00232\ \ \ \ \ Colour\ white\_key\_color\_;\ }
\DoxyCodeLine{00233\ \ \ \ \ Colour\ black\_key\_color\_;\ }
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ JUCE\_DECLARE\_NON\_COPYABLE\_WITH\_LEAK\_DETECTOR(\mbox{\hyperlink{class_midi_keyboard}{MidiKeyboard}})}
\DoxyCodeLine{00236\ \};}

\end{DoxyCode}
