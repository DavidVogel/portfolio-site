\doxysection{wave\+\_\+fold\+\_\+overlay.\+cpp}
\hypertarget{wave__fold__overlay_8cpp_source}{}\label{wave__fold__overlay_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/wavetable/overlays/wave\_fold\_overlay.cpp@{/Users/davidvogel/repos/VitalHelp/src/interface/wavetable/overlays/wave\_fold\_overlay.cpp}}
\mbox{\hyperlink{wave__fold__overlay_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wave__fold__overlay_8h}{wave\_fold\_overlay.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{skin_8h}{skin.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wave__frame_8h}{wave\_frame.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__slider_8h}{synth\_slider.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{text__look__and__feel_8h}{text\_look\_and\_feel.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \mbox{\hyperlink{class_wave_fold_overlay_a1e4773f2a3ba16f7c44b892e86f25dba}{WaveFoldOverlay::WaveFoldOverlay}}()\ :\ \mbox{\hyperlink{class_wavetable_component_overlay}{WavetableComponentOverlay}}(\textcolor{stringliteral}{"{}WAVE\ FOLDER"{}}),\ wave\_fold\_modifier\_(nullptr)\ \{}
\DoxyCodeLine{00009\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \ \ \textcolor{comment}{//\ Initialize\ wave\ fold\ amount\ slider}}
\DoxyCodeLine{00012\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}\ =\ std::make\_unique<SynthSlider>(\textcolor{stringliteral}{"{}wave\_fold\_amount"{}});}
\DoxyCodeLine{00013\ \ \ \mbox{\hyperlink{class_synth_section_a181a568bf38b29974c7c18ebc9cb8c04}{addSlider}}(\mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}.get());}
\DoxyCodeLine{00014\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>getImageComponent()-\/>setAlwaysOnTop(\textcolor{keyword}{true});}
\DoxyCodeLine{00015\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setAlwaysOnTop(\textcolor{keyword}{true});}
\DoxyCodeLine{00016\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>addListener(\textcolor{keyword}{this});}
\DoxyCodeLine{00017\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setRange(1.0f,\ 32.0f);}
\DoxyCodeLine{00018\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setDoubleClickReturnValue(\textcolor{keyword}{true},\ 1.0f);}
\DoxyCodeLine{00019\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setLookAndFeel(\mbox{\hyperlink{class_text_look_and_feel_a3723dc598c94042165d4981963649828}{TextLookAndFeel::instance}}());}
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setSliderStyle(Slider::RotaryHorizontalVerticalDrag);}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \textcolor{comment}{//\ Set\ control\ background\ titles}}
\DoxyCodeLine{00023\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2a8f4bb987688fe42ad8f6c2fa155114}{controls\_background\_}}.\mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_aa2fc0516ff532630f3bfcf5910e453b1}{clearTitles}}();}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2a8f4bb987688fe42ad8f6c2fa155114}{controls\_background\_}}.\mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a4a532ad324a0ab5e341ab2d6808969f8}{addTitle}}(\textcolor{stringliteral}{"{}MULTIPLY"{}});}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wave_fold_overlay_a1211256c229f38cf0a2fcf728a80b77f}{WaveFoldOverlay::frameSelected}}(\mbox{\hyperlink{class_wavetable_keyframe}{WavetableKeyframe}}*\ keyframe)\ \{}
\DoxyCodeLine{00028\ \ \ \textcolor{keywordflow}{if}\ (keyframe\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00030\ \ \ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{//\ Frame\ belongs\ to\ the\ wave\ fold\ modifier,\ update\ UI\ values}}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (keyframe-\/>\mbox{\hyperlink{class_wavetable_keyframe_a568088f16dde91e6f8ae8d0f3fa5b755}{owner}}()\ ==\ \mbox{\hyperlink{class_wave_fold_overlay_ad3c4eee1eb3cfae542fad8454c5f41c6}{wave\_fold\_modifier\_}})\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}}\ =\ \mbox{\hyperlink{class_wave_fold_overlay_ad3c4eee1eb3cfae542fad8454c5f41c6}{wave\_fold\_modifier\_}}-\/>\mbox{\hyperlink{class_wave_fold_modifier_a53b4c100b59a8ab602cad94744ea6d94}{getKeyframe}}(keyframe-\/>\mbox{\hyperlink{class_wavetable_keyframe_a1faf74be7dd4b7f3f4ea0e83fa75ce8d}{index}}());}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setValue(\mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}}-\/>\mbox{\hyperlink{class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_ab1fe25d39f5703b618ff026d7634e12d}{getWaveFoldBoost}}(),\ dontSendNotification);}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>redoImage();}
\DoxyCodeLine{00037\ \ \ \}}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wave_fold_overlay_affabb87d8a7cb4d53660a59581c29c34}{WaveFoldOverlay::setEditBounds}}(Rectangle<int>\ bounds)\ \{}
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ kFoldWidthHeightRatio\ =\ 4.0f;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{keywordtype}{float}\ width\ =\ bounds.getHeight()\ *\ kFoldWidthHeightRatio;}
\DoxyCodeLine{00044\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a16ea421b63ea56ec8a453dde9b45c7a7}{setControlsWidth}}(width);}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{int}\ x\ =\ bounds.getX()\ +\ (bounds.getWidth()\ -\/\ width)\ /\ 2;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{int}\ title\_height\ =\ bounds.getHeight()\ *\ \mbox{\hyperlink{class_wavetable_component_overlay_a54c6e22bd9b774c88c6246d849ce8c56}{WavetableComponentOverlay::kTitleHeightRatio}};}
\DoxyCodeLine{00048\ \ \ Rectangle<int>\ slider\_bounds(x,\ bounds.getY()\ +\ title\_height,\ width,\ bounds.getHeight()\ -\/\ title\_height);}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2b9025728b8627dae45261e3d72814db}{WavetableComponentOverlay::setEditBounds}}(bounds);}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>setBounds(slider\_bounds);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2a8f4bb987688fe42ad8f6c2fa155114}{controls\_background\_}}.\mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a1de1daf665c06ced4f9cbfe6f5830f05}{setPositions}}();}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>redoImage();}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wave_fold_overlay_ac6736a41f184707429a4ff0f7aa71ebc}{WaveFoldOverlay::sliderValueChanged}}(Slider*\ moved\_slider)\ \{}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}})\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ Update\ the\ current\ keyframe\ with\ the\ new\ fold\ amount}}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{class_wave_fold_overlay_a2bebcb28143d2be71bec95b30cafbdf8}{current\_frame\_}}-\/>\mbox{\hyperlink{class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_a93363af856ab78f3c3e3e902b997eebe}{setWaveFoldBoost}}(\mbox{\hyperlink{class_wave_fold_overlay_ad55eab1a0b5379f742990511532dce59}{wave\_fold\_amount\_}}-\/>getValue());}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_af4410e9de408652e5cc612a0d51e38bd}{notifyChanged}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00061\ \ \ \}}
\DoxyCodeLine{00062\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wave_fold_overlay_a7661fbc895ce1986f9f4efde44a4ca00}{WaveFoldOverlay::sliderDragEnded}}(Slider*\ moved\_slider)\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ User\ finished\ interacting\ with\ the\ slider,\ commit\ changes}}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_af4410e9de408652e5cc612a0d51e38bd}{notifyChanged}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00067\ \}}

\end{DoxyCode}
