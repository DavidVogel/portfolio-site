\doxysection{wavetable\+\_\+component\+\_\+overlay.\+cpp}
\hypertarget{wavetable__component__overlay_8cpp_source}{}\label{wavetable__component__overlay_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/wavetable/overlays/wavetable\_component\_overlay.cpp@{/Users/davidvogel/repos/VitalHelp/src/interface/wavetable/overlays/wavetable\_component\_overlay.cpp}}
\mbox{\hyperlink{wavetable__component__overlay_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wavetable__component__overlay_8h}{wavetable\_component\_overlay.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wavetable__overlay__factory_8h}{wavetable\_overlay\_factory.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{fonts_8h}{fonts.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{skin_8h}{skin.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a1de1daf665c06ced4f9cbfe6f5830f05}{WavetableComponentOverlay::ControlsBackground::setPositions}}()\ \{}
\DoxyCodeLine{00008\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ kTextHeightRatio\ =\ 0.6f;}
\DoxyCodeLine{00009\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a28e8f30df25b76d80790b2219d43b92d}{kMaxLines}}\ =\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a28e8f30df25b76d80790b2219d43b92d}{WavetableComponentOverlay::ControlsBackground::kMaxLines}};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \ \ \textcolor{keywordflow}{if}\ (findParentComponentOfClass<SynthGuiInterface>()\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \textcolor{comment}{//\ Set\ base\ colors\ and\ styles}}
\DoxyCodeLine{00015\ \ \ background\_.\mbox{\hyperlink{class_open_gl_multi_quad_a706334ae3e0b28b38b729132dea195e2}{setColor}}(findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127caffad88f44cd2bcaaf60dbe0032955def}{Skin::kBody}},\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00016\ \ \ border\_.\mbox{\hyperlink{class_open_gl_multi_quad_a706334ae3e0b28b38b729132dea195e2}{setColor}}(findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca57224e1a8b8454d64ee7092f63b89420}{Skin::kWidgetPrimary1}},\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00017\ \ \ Colour\ lighten\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca77726fb0fd1587bfcc4b4b51e51ca61a}{Skin::kLightenScreen}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00018\ \ \ Colour\ text\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca5d5c4928f6b3eebfc770c24400efb04e}{Skin::kBodyText}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00019\ \ \ lines\_.\mbox{\hyperlink{class_open_gl_multi_quad_a706334ae3e0b28b38b729132dea195e2}{setColor}}(lighten);}
\DoxyCodeLine{00020\ \ \ title\_backgrounds\_.\mbox{\hyperlink{class_open_gl_multi_quad_a706334ae3e0b28b38b729132dea195e2}{setColor}}(lighten);}
\DoxyCodeLine{00021\ \ \ \textcolor{keywordtype}{float}\ width\ =\ getWidth();}
\DoxyCodeLine{00022\ \ \ \textcolor{keywordtype}{float}\ line\_width\ =\ 2.0f\ /\ width;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \textcolor{comment}{//\ Set\ line\ positions}}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ line\_positions\_.size()\ \&\&\ i\ <\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a28e8f30df25b76d80790b2219d43b92d}{kMaxLines}};\ ++i)}
\DoxyCodeLine{00026\ \ \ \ \ lines\_.\mbox{\hyperlink{class_open_gl_multi_quad_a35c108ca44accfef5055ac8df84a579d}{setQuad}}(i,\ line\_positions\_[i]\ *\ 2.0f\ /\ width\ -\/\ 1.0f,\ -\/1.0f,\ line\_width,\ 2.0f);}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ lines\_.\mbox{\hyperlink{class_open_gl_multi_quad_a4107db47ccf0c13befdb137e7e98cdfd}{setNumQuads}}(std::min<int>(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(line\_positions\_.size()),\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a28e8f30df25b76d80790b2219d43b92d}{kMaxLines}}));}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ Set\ titles\ and\ background\ quads}}
\DoxyCodeLine{00031\ \ \ \textcolor{keywordtype}{int}\ num\_titles\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(titles\_.size());}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordtype}{int}\ num\_positions\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(line\_positions\_.size());}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{int}\ title\_height\ =\ getHeight()\ *\ \mbox{\hyperlink{class_wavetable_component_overlay_a54c6e22bd9b774c88c6246d849ce8c56}{WavetableComponentOverlay::kTitleHeightRatio}};}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{float}\ gl\_title\_height\ =\ title\_height\ *\ 2.0f\ /\ getHeight();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_titles\ \&\&\ i\ -\/\ 1\ <\ num\_positions;\ ++i)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ std::string\ title\ =\ titles\_[i];}
\DoxyCodeLine{00038\ \ \ \ \ title\_texts\_[i]-\/>setColor(text);}
\DoxyCodeLine{00039\ \ \ \ \ title\_texts\_[i]-\/>setTextSize(title\_height\ *\ kTextHeightRatio);}
\DoxyCodeLine{00040\ \ \ \ \ title\_texts\_[i]-\/>setText(title);}
\DoxyCodeLine{00041\ \ \ \ \ title\_texts\_[i]-\/>setActive(\textcolor{keyword}{true});}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{int}\ start\_position\ =\ 0;}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{int}\ end\_position\ =\ getWidth();}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >\ 0)}
\DoxyCodeLine{00046\ \ \ \ \ \ \ start\_position\ =\ line\_positions\_[i\ -\/\ 1];}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <\ line\_positions\_.size())}
\DoxyCodeLine{00048\ \ \ \ \ \ \ end\_position\ =\ line\_positions\_[i];}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ title\_texts\_[i]-\/>setBounds(start\_position,\ 0,\ end\_position\ -\/\ start\_position,\ title\_height);}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (title.empty())}
\DoxyCodeLine{00052\ \ \ \ \ \ \ title\_backgrounds\_.\mbox{\hyperlink{class_open_gl_multi_quad_a35c108ca44accfef5055ac8df84a579d}{setQuad}}(i,\ -\/2.0f,\ -\/2.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ title\_backgrounds\_.\mbox{\hyperlink{class_open_gl_multi_quad_a35c108ca44accfef5055ac8df84a579d}{setQuad}}(i,\ start\_position\ *\ 2.0f\ /\ getWidth()\ -\/\ 1.0f,\ 1.0f\ -\/\ gl\_title\_height,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (end\_position\ -\/\ start\_position)\ *\ 2.0f\ /\ getWidth(),\ gl\_title\_height);}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ title\_texts\_[i]-\/>redrawImage(\textcolor{keyword}{true});}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ title\_backgrounds\_.\mbox{\hyperlink{class_open_gl_multi_quad_a4107db47ccf0c13befdb137e7e98cdfd}{setNumQuads}}(num\_titles);}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ num\_titles;\ i\ <=\ \mbox{\hyperlink{class_wavetable_component_overlay_1_1_controls_background_a28e8f30df25b76d80790b2219d43b92d}{kMaxLines}};\ ++i)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ title\_texts\_[i]-\/>setActive(\textcolor{keyword}{false});}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wavetable_component_overlay_a2b9025728b8627dae45261e3d72814db}{WavetableComponentOverlay::setEditBounds}}(Rectangle<int>\ bounds)\ \{}
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}\ =\ bounds;}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{int}\ x\ =\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getX()\ +\ (\mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getWidth()\ -\/\ \mbox{\hyperlink{class_wavetable_component_overlay_ae97537a1c5d6f7a311a2fd24e4d8adf2}{controls\_width\_}})\ /\ 2;}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2a8f4bb987688fe42ad8f6c2fa155114}{controls\_background\_}}.setBounds(x,\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getY(),\ \mbox{\hyperlink{class_wavetable_component_overlay_ae97537a1c5d6f7a311a2fd24e4d8adf2}{controls\_width\_}},\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getHeight());}
\DoxyCodeLine{00071\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_a2a8f4bb987688fe42ad8f6c2fa155114}{controls\_background\_}}.repaint();}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ repaint();}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wavetable_component_overlay_a38cd807f29c7a0a74e3b0849cac8989c}{WavetableComponentOverlay::resetOverlay}}()\ \{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_ada81b2e49c510273fe8632c5060ed21e}{current\_component\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{class_wavetable_overlay_factory_a82c5d1f469d8a5d924bf880c71507494}{WavetableOverlayFactory::setOverlayOwner}}(\textcolor{keyword}{this},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00079\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wavetable_component_overlay_a17194f2b7eeefa3f057e2ff81e5d6831}{WavetableComponentOverlay::setComponent}}(\mbox{\hyperlink{class_wavetable_component}{WavetableComponent}}*\ component)\ \{}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{class_wavetable_component_overlay_ada81b2e49c510273fe8632c5060ed21e}{current\_component\_}}\ =\ component;}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{class_wavetable_overlay_factory_a82c5d1f469d8a5d924bf880c71507494}{WavetableOverlayFactory::setOverlayOwner}}(\textcolor{keyword}{this},\ component);}
\DoxyCodeLine{00084\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_wavetable_component_overlay_af4410e9de408652e5cc612a0d51e38bd}{WavetableComponentOverlay::notifyChanged}}(\textcolor{keywordtype}{bool}\ mouse\_up)\ \{}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{if}\ (mouse\_up)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{class_wavetable_component_overlay_1_1_listener}{WavetableComponentOverlay::Listener}}*\ listener\ :\ \mbox{\hyperlink{class_wavetable_component_overlay_a3e18ee2efcb832c4ceea5b9d9a62adb0}{listeners\_}})}
\DoxyCodeLine{00089\ \ \ \ \ \ \ listener-\/>frameDoneEditing();}
\DoxyCodeLine{00090\ \ \ \}}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{class_wavetable_component_overlay_1_1_listener}{WavetableComponentOverlay::Listener}}*\ listener\ :\ \mbox{\hyperlink{class_wavetable_component_overlay_a3e18ee2efcb832c4ceea5b9d9a62adb0}{listeners\_}})}
\DoxyCodeLine{00093\ \ \ \ \ \ \ listener-\/>frameChanged();}
\DoxyCodeLine{00094\ \ \ \}}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_wavetable_component_overlay_a8a1ba69308f77b0360815c7bc01f2bea}{WavetableComponentOverlay::getTitleHeight}}()\ \{}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getWidth()\ *\ \mbox{\hyperlink{class_wavetable_component_overlay_a6b4f0ec13eae763cfe41d222bdd6e4d6}{kTitleHeightForWidth}};}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_wavetable_component_overlay_a7009aa9df02ec7243c56cd921a5d562d}{WavetableComponentOverlay::getDividerX}}()\ \{}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getX()\ +\ \mbox{\hyperlink{class_wavetable_component_overlay_a79cfe277356d25426e751e53e0749add}{kDividerPoint}}\ *\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getWidth();}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_wavetable_component_overlay_a9f1ba77b3e65e49ec6b6b79a6b7a13bf}{WavetableComponentOverlay::getWidgetHeight}}()\ \{}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_wavetable_component_overlay_a769ee76d39efc9372a18908a33a66c3a}{edit\_bounds\_}}.getWidth()\ *\ \mbox{\hyperlink{class_wavetable_component_overlay_a1dc8ebf7c8b29a42227c25a93f8537eb}{kWidgetHeightForWidth}};}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_wavetable_component_overlay_a091cdc77681d394bb162b3f4ca04e8e7}{WavetableComponentOverlay::getWidgetPadding}}()\ \{}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_wavetable_component_overlay_a9f1ba77b3e65e49ec6b6b79a6b7a13bf}{getWidgetHeight}}()\ /\ 2.0f;}
\DoxyCodeLine{00111\ \}}

\end{DoxyCode}
