\doxysection{synth\+\_\+voice\+\_\+handler.\+cpp}
\hypertarget{synth__voice__handler_8cpp_source}{}\label{synth__voice__handler_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/synth\_voice\_handler.cpp@{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/synth\_voice\_handler.cpp}}
\mbox{\hyperlink{synth__voice__handler_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__voice__handler_8h}{synth\_voice\_handler.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{envelope_8h}{envelope.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{envelope__module_8h}{envelope\_module.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filters__module_8h}{filters\_module.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{line__map_8h}{line\_map.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{operators_8h}{operators.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{portamento__slope_8h}{portamento\_slope.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{random__lfo__module_8h}{random\_lfo\_module.h}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__constants_8h}{synth\_constants.h}}"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lfo__module_8h}{lfo\_module.h}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{trigger__random_8h}{trigger\_random.h}}"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{value__switch_8h}{value\_switch.h}}"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{modulation__connection__processor_8h}{modulation\_connection\_processor.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacevital}{vital}}\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_ad76a6e4b6538abb77e3e4a3ac24dc79e}{SynthVoiceHandler::SynthVoiceHandler}}(\mbox{\hyperlink{structvital_1_1_output}{Output}}*\ beats\_per\_second)\ :}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler}{VoiceHandler}}(0,\ \mbox{\hyperlink{namespacevital_a99d8c3c0bd5a84c70f8d20f5c7ff0875}{kMaxPolyphony}}),\ producers\_(nullptr),\ beats\_per\_second\_(beats\_per\_second),}
\DoxyCodeLine{00026\ \ \ \ \ \ \ note\_from\_reference\_(nullptr),\ midi\_offset\_output\_(nullptr),}
\DoxyCodeLine{00027\ \ \ \ \ \ \ bent\_midi\_(nullptr),\ current\_midi\_note\_(nullptr),\ amplitude\_envelope\_(nullptr),\ amplitude\_(nullptr),}
\DoxyCodeLine{00028\ \ \ \ \ \ \ pitch\_wheel\_(nullptr),\ filters\_module\_(nullptr),\ lfos\_(),\ envelopes\_(),\ lfo\_sources\_(),\ random\_(nullptr),}
\DoxyCodeLine{00029\ \ \ \ \ \ \ random\_lfos\_(),\ note\_mapping\_(nullptr),\ velocity\_mapping\_(nullptr),\ aftertouch\_mapping\_(nullptr),}
\DoxyCodeLine{00030\ \ \ \ \ \ \ slide\_mapping\_(nullptr),\ lift\_mapping\_(nullptr),\ mod\_wheel\_mapping\_(nullptr),}
\DoxyCodeLine{00031\ \ \ \ \ \ \ pitch\_wheel\_mapping\_(nullptr),\ stereo\_(nullptr),\ note\_percentage\_(nullptr),\ last\_active\_voice\_mask\_(0)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ output\_\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1_multiply}{Multiply}}();}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_ac6d558d9f34643e9b79cec8cf8fd4299}{registerOutput}}(output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ direct\_output\_\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1_multiply}{Multiply}}();}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_ac6d558d9f34643e9b79cec8cf8fd4299}{registerOutput}}(direct\_output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ note\_from\_reference\_\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1cr_1_1_add}{cr::Add}}();}
\DoxyCodeLine{00039\ \ \ \ \ midi\_offset\_output\_\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_ade40a08b9e01e1520ae1d5c18a37036f}{registerControlRateOutput}}(note\_from\_reference\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ enabled\_modulation\_processors\_.ensureCapacity(\mbox{\hyperlink{namespacevital_abcbdb48fbd4d9f98b90cae346ee22044}{kMaxModulationConnections}});}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a253f98dadfe6011cafa8a90407248f30}{SynthVoiceHandler::init}}()\ \{}
\DoxyCodeLine{00051\ \ \ \ \ createNoteArticulation();}
\DoxyCodeLine{00052\ \ \ \ \ createProducers();}
\DoxyCodeLine{00053\ \ \ \ \ createModulators();}
\DoxyCodeLine{00054\ \ \ \ \ createFilters(note\_from\_reference\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00055\ \ \ \ \ createVoiceOutput();}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_add}{Add}}*\ voice\_sum\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1_add}{Add}}();}
\DoxyCodeLine{00058\ \ \ \ \ voice\_sum-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(filters\_module\_,\ 0);}
\DoxyCodeLine{00059\ \ \ \ \ voice\_sum-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_producers_module_ab951befa5089c179084b9fb132f5653ca2e9a344184ee3ba9cc5f1046dc183b41}{ProducersModule::kRawOut}}),\ 1);}
\DoxyCodeLine{00060\ \ \ \ \ output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(voice\_sum,\ 0);}
\DoxyCodeLine{00061\ \ \ \ \ output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(amplitude\_,\ 1);}
\DoxyCodeLine{00062\ \ \ \ \ direct\_output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_producers_module_ab951befa5089c179084b9fb132f5653ca934c84497dd1f6ad3227ff8581bd137f}{ProducersModule::kDirectOut}}),\ 0);}
\DoxyCodeLine{00063\ \ \ \ \ direct\_output\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(amplitude\_,\ 1);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(voice\_sum);}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(output\_);}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(direct\_output\_);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ macros[\mbox{\hyperlink{namespacevital_adad4ff0a7bac9530c4840d320351a265}{kNumMacros}}];}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_adad4ff0a7bac9530c4840d320351a265}{kNumMacros}};\ ++i)}
\DoxyCodeLine{00071\ \ \ \ \ \ \ macros[i]\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_ae5eccb22cca0d1f82d4c2273a91b0cad}{createMonoModControl}}(\textcolor{stringliteral}{"{}macro\_control\_"{}}\ +\ std::to\_string(i\ +\ 1));}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa5b94e7e9b6c92fd4d0f5999e7a311a6}{setVoiceKiller}}(amplitude\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_abcbdb48fbd4d9f98b90cae346ee22044}{vital::kMaxModulationConnections}};\ ++i)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor\ =\ modulation\_bank\_.\mbox{\hyperlink{classvital_1_1_modulation_connection_bank_a12e4e9852ad8f0828340b74c0af06a83}{atIndex}}(i)-\/>\mbox{\hyperlink{structvital_1_1_modulation_connection_a3e60937dc576522f7c477da963dda169}{modulation\_processor}}.get();}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ processor-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a976723d6f281467f174826548bacfad0}{reset}}(),\ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor_adb044083dd7b3a36b0b03ce83e3b646ea354c6374825385c8791eef0cbbb04be8}{ModulationConnectionProcessor::kReset}});}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ std::string\ number\ =\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ std::string\ amount\_name\ =\ \textcolor{stringliteral}{"{}modulation\_"{}}\ +\ number\ +\ \textcolor{stringliteral}{"{}\_amount"{}};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ modulation\_amount\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(amount\_name);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ processor-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(modulation\_amount,\ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor_adb044083dd7b3a36b0b03ce83e3b646ea83ca80c8553949341e7b53d70bb55721}{ModulationConnectionProcessor::kModulationAmount}});}
\DoxyCodeLine{00084\ \ \ \ \ \ \ processor-\/>\mbox{\hyperlink{classvital_1_1_modulation_connection_processor_a6fae60fd88df00ad4bf56b967a57ee46}{initializeBaseValue}}(\mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>controls[amount\_name]);}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ modulation\_power\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}modulation\_"{}}\ +\ number\ +\ \textcolor{stringliteral}{"{}\_power"{}});}
\DoxyCodeLine{00087\ \ \ \ \ \ \ processor-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(modulation\_power,\ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor_adb044083dd7b3a36b0b03ce83e3b646ea92eac5c793bf49dfa23045a37375f427}{ModulationConnectionProcessor::kModulationPower}});}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(processor);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(processor);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ processor-\/>\mbox{\hyperlink{classvital_1_1_synth_module_ad4f615773fab56c5a41aa4229bd26089}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a4356352dc3f7b72cdd071d8a7d813651}{VoiceHandler::init}}();}
\DoxyCodeLine{00095\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_producers_module_a819165e8d7eca1ea7a2271ff2ec3aa29}{setFilter1On}}(filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_filters_module_aed0b82c5b7781be29d0b6cdaba8da6fc}{getFilter1OnValue}}());}
\DoxyCodeLine{00096\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_producers_module_a4d847bac85c474a0baf0cd32a5ea686c}{setFilter2On}}(filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_filters_module_a6591cb008726401a1ab9c0f3638532ab}{getFilter2OnValue}}());}
\DoxyCodeLine{00097\ \ \ \ \ setupPolyModulationReadouts();}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_adad4ff0a7bac9530c4840d320351a265}{kNumMacros}};\ ++i)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ std::string\ name\ =\ \textcolor{stringliteral}{"{}macro\_control\_"{}}\ +\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[name]\ =\ macros[i];}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(name,\ macros[i]);}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_a685d103a6454a0b6e8e370cb574c21b5}{kNumRandomLfos}};\ ++i)\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ std::string\ name\ =\ \textcolor{stringliteral}{"{}random\_"{}}\ +\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[name]\ =\ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}();}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(name,\ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00109\ \ \ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}random"{}}]\ =\ random\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}();}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}stereo"{}}]\ =\ stereo\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}();}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}random"{}},\ random\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}stereo"{}},\ stereo\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00116\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}sample\_phase"{}},\ producers\_-\/>\mbox{\hyperlink{classvital_1_1_producers_module_adf57430c79506d1c0ca777b14952b2bb}{samplePhaseOutput}}());}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}num\_voices"{}},\ \&num\_voices\_);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ std::string\ modulation\_source\_prefix\ =\ \textcolor{stringliteral}{"{}modulation\_source\_"{}};}
\DoxyCodeLine{00120\ \ \ \ \ std::string\ modulation\_amount\_prefix\ =\ \textcolor{stringliteral}{"{}modulation\_amount\_"{}};}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_abcbdb48fbd4d9f98b90cae346ee22044}{vital::kMaxModulationConnections}};\ ++i)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor\ =\ modulation\_bank\_.\mbox{\hyperlink{classvital_1_1_modulation_connection_bank_a12e4e9852ad8f0828340b74c0af06a83}{atIndex}}(i)-\/>\mbox{\hyperlink{structvital_1_1_modulation_connection_a3e60937dc576522f7c477da963dda169}{modulation\_processor}}.get();}
\DoxyCodeLine{00123\ \ \ \ \ \ \ std::string\ number\ =\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ source\_output\ =\ processor-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_modulation_connection_processor_a415b8c73b042c81b1550d172c7dd6ed6ad0254beefbfc1eb7a36bc20442f87204}{ModulationConnectionProcessor::kModulationSource}});}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ pre\_scale\_output\ =\ processor-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_modulation_connection_processor_a415b8c73b042c81b1550d172c7dd6ed6a47598f66aca0c05a772b1ec4c7837db6}{ModulationConnectionProcessor::kModulationPreScale}});}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(modulation\_source\_prefix\ +\ number,\ source\_output);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(modulation\_amount\_prefix\ +\ number,\ pre\_scale\_output);}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00134\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a0767669e81f3667441c9af66fa4a9738}{SynthVoiceHandler::prepareDestroy}}()\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_abcbdb48fbd4d9f98b90cae346ee22044}{vital::kMaxModulationConnections}};\ ++i)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor\ =\ modulation\_bank\_.\mbox{\hyperlink{classvital_1_1_modulation_connection_bank_a12e4e9852ad8f0828340b74c0af06a83}{atIndex}}(i)-\/>\mbox{\hyperlink{structvital_1_1_modulation_connection_a3e60937dc576522f7c477da963dda169}{modulation\_processor}}.get();}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a609a240662e8d02977b3d78398489b91}{removeProcessor}}(processor);}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::createProducers()\ \{}
\DoxyCodeLine{00142\ \ \ \ \ producers\_\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1_producers_module}{ProducersModule}}();}
\DoxyCodeLine{00143\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a976723d6f281467f174826548bacfad0}{reset}}(),\ \mbox{\hyperlink{classvital_1_1_producers_module_a5adb0f89852e1b53e1d15845f0f7d12aa001678fb8b8820b91a376b304fbb7419}{ProducersModule::kReset}});}
\DoxyCodeLine{00144\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a0b383ada4224e84985c24a6d933dc727}{retrigger}}(),\ \mbox{\hyperlink{classvital_1_1_producers_module_a5adb0f89852e1b53e1d15845f0f7d12aac3aeaadb75f8847072a36cc6ea60ca2c}{ProducersModule::kRetrigger}});}
\DoxyCodeLine{00145\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bent\_midi\_,\ \mbox{\hyperlink{classvital_1_1_producers_module_a5adb0f89852e1b53e1d15845f0f7d12aa167f18658977a9f2b38131999482e4f8}{ProducersModule::kMidi}});}
\DoxyCodeLine{00146\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a846e5c9914a34e31aad4d802fbd1b03e}{note\_count}}(),\ \mbox{\hyperlink{classvital_1_1_producers_module_a5adb0f89852e1b53e1d15845f0f7d12aa7409101f35e82f80835145f251ecf7c5}{ProducersModule::kNoteCount}});}
\DoxyCodeLine{00147\ \ \ \ \ producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_adbc3fd9c0b7be93f56c82ee8cd645f5b}{active\_mask}}(),\ \mbox{\hyperlink{classvital_1_1_producers_module_a5adb0f89852e1b53e1d15845f0f7d12aa00032c7fba349dd619f75e798d321686}{ProducersModule::kActiveVoices}});}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(producers\_);}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(producers\_);}
\DoxyCodeLine{00150\ \ \ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::createModulators()\ \{}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_aba56646bec643d6d416700b782ed978b}{kNumLfos}};\ ++i)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ lfo\_sources\_[i].\mbox{\hyperlink{class_line_generator_a26f4edc20d552c83d2c892733c6f2f55}{setLoop}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00155\ \ \ \ \ \ \ lfo\_sources\_[i].\mbox{\hyperlink{class_line_generator_ab4193765104ac51ea7d87e1d7fdb9739}{initTriangle}}();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ std::string\ prefix\ =\ std::string(\textcolor{stringliteral}{"{}lfo\_"{}})\ +\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ LfoModule*\ lfo\ =\ \textcolor{keyword}{new}\ LfoModule(prefix,\ \&lfo\_sources\_[i],\ beats\_per\_second\_);}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(lfo);}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(lfo);}
\DoxyCodeLine{00160\ \ \ \ \ \ \ lfos\_[i]\ =\ lfo;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ lfo-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a0b383ada4224e84985c24a6d933dc727}{retrigger}}(),\ \mbox{\hyperlink{classvital_1_1_lfo_module_abb73c06ccf9842ff617cc8c012a92a65abc7ab1a8da245d8b6b224275365332ba}{LfoModule::kNoteTrigger}});}
\DoxyCodeLine{00162\ \ \ \ \ \ \ lfo-\/>plug(\mbox{\hyperlink{classvital_1_1_voice_handler_a846e5c9914a34e31aad4d802fbd1b03e}{note\_count}}(),\ \mbox{\hyperlink{classvital_1_1_lfo_module_abb73c06ccf9842ff617cc8c012a92a65a8a39c7e309d660137a76d6ba374e5918}{LfoModule::kNoteCount}});}
\DoxyCodeLine{00163\ \ \ \ \ \ \ lfo-\/>plug(bent\_midi\_,\ \mbox{\hyperlink{classvital_1_1_lfo_module_abb73c06ccf9842ff617cc8c012a92a65a70c9d6f5ffd1a65f5c10305a09534095}{LfoModule::kMidi}});}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[prefix]\ =\ lfo-\/>output(\mbox{\hyperlink{classvital_1_1_lfo_module_ac14d1b1ec1ff9b830fce8cbafd79000da55c4b5adbdb9feae815f634518ba0f82}{LfoModule::kValue}});}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(prefix,\ lfo-\/>output(\mbox{\hyperlink{classvital_1_1_lfo_module_ac14d1b1ec1ff9b830fce8cbafd79000da55c4b5adbdb9feae815f634518ba0f82}{LfoModule::kValue}}));}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(prefix\ +\ \textcolor{stringliteral}{"{}\_phase"{}},\ lfo-\/>output(\mbox{\hyperlink{classvital_1_1_lfo_module_ac14d1b1ec1ff9b830fce8cbafd79000da44b10b7a32e73272b58aa225c6f3ae3d}{LfoModule::kOscPhase}}));}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(prefix\ +\ \textcolor{stringliteral}{"{}\_frequency"{}},\ lfo-\/>output(\mbox{\hyperlink{classvital_1_1_lfo_module_ac14d1b1ec1ff9b830fce8cbafd79000dac073f451e2ed568f5e443fe86d3ae5fd}{LfoModule::kOscFrequency}}));}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_a9acbf7e6b849148921f335c101e02fe6}{kNumEnvelopes}};\ ++i)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ std::string\ prefix\ =\ std::string(\textcolor{stringliteral}{"{}env\_"{}})\ +\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00173\ \ \ \ \ \ \ EnvelopeModule*\ envelope\ =\ \textcolor{keyword}{new}\ EnvelopeModule(prefix,\ i\ ==\ 0);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ envelope-\/>plug(\mbox{\hyperlink{classvital_1_1_voice_handler_a0b383ada4224e84985c24a6d933dc727}{retrigger}}(),\ \mbox{\hyperlink{classvital_1_1_envelope_module_a90830783e6541db19206c6dd7a28ab0ea701f0c32407fffd1de88ce1a04604bd9}{EnvelopeModule::kTrigger}});}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(envelope);}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(envelope);}
\DoxyCodeLine{00177\ \ \ \ \ \ \ envelopes\_[i]\ =\ envelope;}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[prefix]\ =\ envelope-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}();}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(prefix,\ envelope-\/>output(\mbox{\hyperlink{classvital_1_1_envelope_module_aaa6e275b6af3671def968075b12c37fda1c0bf82948e75e43145883c87918c73f}{EnvelopeModule::kValue}}));}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(prefix\ +\ \textcolor{stringliteral}{"{}\_phase"{}},\ envelope-\/>output(\mbox{\hyperlink{classvital_1_1_envelope_module_aaa6e275b6af3671def968075b12c37fda23a3b74a6045390079789678e70d3ac9}{EnvelopeModule::kPhase}}));}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ random\_\ =\ \textcolor{keyword}{new}\ TriggerRandom();}
\DoxyCodeLine{00185\ \ \ \ \ random\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a0b383ada4224e84985c24a6d933dc727}{retrigger}}());}
\DoxyCodeLine{00186\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(random\_);}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_a685d103a6454a0b6e8e370cb574c21b5}{kNumRandomLfos}};\ ++i)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ std::string\ name\ =\ \textcolor{stringliteral}{"{}random\_"{}}\ +\ std::to\_string(i\ +\ 1);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ random\_lfos\_[i]\ =\ \textcolor{keyword}{new}\ RandomLfoModule(name,\ beats\_per\_second\_);}
\DoxyCodeLine{00191\ \ \ \ \ \ \ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a0b383ada4224e84985c24a6d933dc727}{retrigger}}(),\ \mbox{\hyperlink{classvital_1_1_random_lfo_module_ad4c338567f74f0c119d1258edd60b899a083e97a4fef1d3803462917c0e60676f}{RandomLfoModule::kNoteTrigger}});}
\DoxyCodeLine{00192\ \ \ \ \ \ \ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bent\_midi\_,\ \mbox{\hyperlink{classvital_1_1_random_lfo_module_ad4c338567f74f0c119d1258edd60b899a0c2abdf4bbea15f223dda8456b72dd01}{RandomLfoModule::kMidi}});}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(random\_lfos\_[i]);}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(random\_lfos\_[i]);}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ stereo\_\ =\ \textcolor{keyword}{new}\ cr::Value(\mbox{\hyperlink{namespacevital_1_1constants_abd69815839bf08a7aec6bf015c9aa8cf}{constants::kLeftOne}});}
\DoxyCodeLine{00198\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a39c59179f80d8107eb5043454185bb3e}{addIdleMonoProcessor}}(stereo\_);}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}note"{}}]\ =\ note\_percentage\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}();}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}note\_in\_octave"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_af3fd762c49f8027e66573046529622c8}{note\_in\_octave}}();}
\DoxyCodeLine{00202\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}aftertouch"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a880366215541e8b4993a7f7ab5f32099}{aftertouch}}();}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}velocity"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a0864b01c35b14dd08f928d9a860c88a0}{velocity}}();}
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}slide"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a462430bd8e71f5fe0a3930c5172052b5}{slide}}();}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}lift"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_ad144feadb03921b4e7e1efef2c7fa0e9}{lift}}();}
\DoxyCodeLine{00206\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}mod\_wheel"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a70bc08150629cec99717dc0a46c777e6}{mod\_wheel}}();}
\DoxyCodeLine{00207\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>mod\_sources[\textcolor{stringliteral}{"{}pitch\_wheel"{}}]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a92a74775e0aa6b32f59b9476617d6deb}{pitch\_wheel\_percent}}();}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}note"{}},\ note\_percentage\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00210\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}note\_in\_octave"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_af3fd762c49f8027e66573046529622c8}{note\_in\_octave}}());}
\DoxyCodeLine{00211\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}aftertouch"{}}\ ,\mbox{\hyperlink{classvital_1_1_voice_handler_a880366215541e8b4993a7f7ab5f32099}{aftertouch}}());}
\DoxyCodeLine{00212\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}velocity"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a0864b01c35b14dd08f928d9a860c88a0}{velocity}}());}
\DoxyCodeLine{00213\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}slide"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a462430bd8e71f5fe0a3930c5172052b5}{slide}}());}
\DoxyCodeLine{00214\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}lift"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_ad144feadb03921b4e7e1efef2c7fa0e9}{lift}}());}
\DoxyCodeLine{00215\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}mod\_wheel"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a70bc08150629cec99717dc0a46c777e6}{mod\_wheel}}());}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac79d68aed81a3aec11e4448f66447315}{createStatusOutput}}(\textcolor{stringliteral}{"{}pitch\_wheel"{}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a92a74775e0aa6b32f59b9476617d6deb}{pitch\_wheel\_percent}}());}
\DoxyCodeLine{00217\ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::createFilters(Output*\ keytrack)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ filters\_module\_\ =\ \textcolor{keyword}{new}\ FiltersModule();}
\DoxyCodeLine{00221\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_ac711ab2fcf3df34bc0ab9bf0c67f2b13}{addSubmodule}}(filters\_module\_);}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(filters\_module\_);}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_producers_module_ab951befa5089c179084b9fb132f5653ca32a6b2454bc9ddf793b9dfc512b0da52}{ProducersModule::kToFilter1}}),\ \mbox{\hyperlink{classvital_1_1_filters_module_ae0ab17627ee646507e75928251331f3ea2c97ee99ead8af31aca84f01f2ed9622}{FiltersModule::kFilter1Input}});}
\DoxyCodeLine{00225\ \ \ \ \ filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(producers\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_producers_module_ab951befa5089c179084b9fb132f5653caebf63fd007497472d267399c10cd82fe}{ProducersModule::kToFilter2}}),\ \mbox{\hyperlink{classvital_1_1_filters_module_ae0ab17627ee646507e75928251331f3ea778b5ee1c05f36330b9f24ab1242e4b0}{FiltersModule::kFilter2Input}});}
\DoxyCodeLine{00226\ \ \ \ \ filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a976723d6f281467f174826548bacfad0}{reset}}(),\ \mbox{\hyperlink{classvital_1_1_filters_module_ae0ab17627ee646507e75928251331f3ea0606ddf2e84fd2bf2731a9f780a7fb19}{FiltersModule::kReset}});}
\DoxyCodeLine{00227\ \ \ \ \ filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(keytrack,\ \mbox{\hyperlink{classvital_1_1_filters_module_ae0ab17627ee646507e75928251331f3ea705ad20574ad2013b8a435a04a03578e}{FiltersModule::kKeytrack}});}
\DoxyCodeLine{00228\ \ \ \ \ filters\_module\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bent\_midi\_,\ \mbox{\hyperlink{classvital_1_1_filters_module_ae0ab17627ee646507e75928251331f3ea16c11f7e14d8283c20f8c0c4d780310a}{FiltersModule::kMidi}});}
\DoxyCodeLine{00229\ \ \ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::createNoteArticulation()\ \{}
\DoxyCodeLine{00232\ \ \ \ \ Output*\ portamento\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}portamento\_time"{}});}
\DoxyCodeLine{00233\ \ \ \ \ Output*\ portamento\_slope\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}portamento\_slope"{}});}
\DoxyCodeLine{00234\ \ \ \ \ Value*\ portamento\_force\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}portamento\_force"{}});}
\DoxyCodeLine{00235\ \ \ \ \ Value*\ portamento\_scale\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}portamento\_scale"{}});}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ current\_midi\_note\_\ =\ \textcolor{keyword}{new}\ PortamentoSlope();}
\DoxyCodeLine{00238\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_ad6359772bd2bc8452c3a2c22b654751e}{last\_note}}(),\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea73b8832943bd5d6674b9646168982432}{PortamentoSlope::kSource}});}
\DoxyCodeLine{00239\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}}(),\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3eab022925b2d1139861490910d33bab148}{PortamentoSlope::kTarget}});}
\DoxyCodeLine{00240\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(portamento\_force,\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3eaffc5904e038bd0bd8ceca9938f68c46c}{PortamentoSlope::kPortamentoForce}});}
\DoxyCodeLine{00241\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(portamento\_scale,\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea2fbe9daa954f8e791142b0114a8fba7d}{PortamentoSlope::kPortamentoScale}});}
\DoxyCodeLine{00242\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(portamento,\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea22f0f946c0b0803fb0603f9754abec90}{PortamentoSlope::kRunSeconds}});}
\DoxyCodeLine{00243\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(portamento\_slope,\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea73790ee93bae5ea1127a97da26fdb761}{PortamentoSlope::kSlopePower}});}
\DoxyCodeLine{00244\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a5bab229a723b7e9320270adbdafe5470}{voice\_event}}(),\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea9a60aee91c4683d8007f4e7ff9802acf}{PortamentoSlope::kReset}});}
\DoxyCodeLine{00245\ \ \ \ \ current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a3c664ee950ff76142332c898ab8149dc}{note\_pressed}}(),\ \mbox{\hyperlink{classvital_1_1_portamento_slope_a19e08c15353dda0ff64f00c42ba5df3ea71c8faae1a26e351bef053234bed8db2}{PortamentoSlope::kNumNotesPressed}});}
\DoxyCodeLine{00246\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aeefea73f352fe89dba038f4b7436dbac}{setVoiceMidi}}(current\_midi\_note\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}());}
\DoxyCodeLine{00247\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(current\_midi\_note\_);}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ Output*\ pitch\_bend\_range\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}pitch\_bend\_range"{}});}
\DoxyCodeLine{00250\ \ \ \ \ Output*\ voice\_tune\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}voice\_tune"{}});}
\DoxyCodeLine{00251\ \ \ \ \ Output*\ voice\_transpose\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}voice\_transpose"{}});}
\DoxyCodeLine{00252\ \ \ \ \ cr::Multiply*\ pitch\_bend\ =\ \textcolor{keyword}{new}\ cr::Multiply();}
\DoxyCodeLine{00253\ \ \ \ \ pitch\_bend-\/>plug(\mbox{\hyperlink{classvital_1_1_voice_handler_a226348dca73703b71c33951215eda2a8}{pitch\_wheel}}(),\ 0);}
\DoxyCodeLine{00254\ \ \ \ \ pitch\_bend-\/>plug(pitch\_bend\_range,\ 1);}
\DoxyCodeLine{00255\ \ \ \ \ bent\_midi\_\ =\ \textcolor{keyword}{new}\ cr::VariableAdd();}
\DoxyCodeLine{00256\ \ \ \ \ bent\_midi\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a330bb54cfa578d50210e265455283c47}{plugNext}}(current\_midi\_note\_);}
\DoxyCodeLine{00257\ \ \ \ \ bent\_midi\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a330bb54cfa578d50210e265455283c47}{plugNext}}(pitch\_bend);}
\DoxyCodeLine{00258\ \ \ \ \ bent\_midi\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a330bb54cfa578d50210e265455283c47}{plugNext}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a265a67b52cf6b80a0a14dd20b18f61a6}{local\_pitch\_bend}}());}
\DoxyCodeLine{00259\ \ \ \ \ bent\_midi\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a330bb54cfa578d50210e265455283c47}{plugNext}}(voice\_tune);}
\DoxyCodeLine{00260\ \ \ \ \ bent\_midi\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a330bb54cfa578d50210e265455283c47}{plugNext}}(voice\_transpose);}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ cr::Value\ max\_midi\_invert(1.0f\ /\ (\mbox{\hyperlink{namespacevital_a7be9efa423f42230b10924b0f69b3b03}{kMidiSize}}\ -\/\ 1));}
\DoxyCodeLine{00263\ \ \ \ \ note\_percentage\_\ =\ \textcolor{keyword}{new}\ cr::Multiply();}
\DoxyCodeLine{00264\ \ \ \ \ note\_percentage\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\&max\_midi\_invert,\ 0);}
\DoxyCodeLine{00265\ \ \ \ \ note\_percentage\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bent\_midi\_,\ 1);}
\DoxyCodeLine{00266\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(note\_percentage\_);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ cr::Value\ reference\_adjust(-\/\mbox{\hyperlink{namespacevital_a9395be5629fb21059bd6a337ca1f2cd0}{kMidiTrackCenter}});}
\DoxyCodeLine{00269\ \ \ \ \ note\_from\_reference\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(\&reference\_adjust,\ 0);}
\DoxyCodeLine{00270\ \ \ \ \ note\_from\_reference\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bent\_midi\_,\ 1);}
\DoxyCodeLine{00271\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(note\_from\_reference\_);}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(pitch\_bend);}
\DoxyCodeLine{00274\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(bent\_midi\_);}
\DoxyCodeLine{00275\ \ \ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::createVoiceOutput()\ \{}
\DoxyCodeLine{00278\ \ \ \ \ Output*\ velocity\_track\_amount\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}velocity\_track"{}});}
\DoxyCodeLine{00279\ \ \ \ \ cr::Interpolate*\ velocity\_track\_mult\ =\ \textcolor{keyword}{new}\ cr::Interpolate();}
\DoxyCodeLine{00280\ \ \ \ \ velocity\_track\_mult-\/>plug(\&\mbox{\hyperlink{namespacevital_1_1constants_afd9b3158b0cc852dce89394efe828e1b}{constants::kValueOne}},\ \mbox{\hyperlink{classvital_1_1_interpolate_add257094ad0641a8d9e916483ca9934aaa2176883d6211fc937022b11b77d764e}{Interpolate::kFrom}});}
\DoxyCodeLine{00281\ \ \ \ \ velocity\_track\_mult-\/>plug(\mbox{\hyperlink{classvital_1_1_voice_handler_a0864b01c35b14dd08f928d9a860c88a0}{velocity}}(),\ \mbox{\hyperlink{classvital_1_1_interpolate_add257094ad0641a8d9e916483ca9934aa76337bb9de6999067bfe9b6aeb9ca6d7}{Interpolate::kTo}});}
\DoxyCodeLine{00282\ \ \ \ \ velocity\_track\_mult-\/>plug(velocity\_track\_amount,\ \mbox{\hyperlink{classvital_1_1_interpolate_add257094ad0641a8d9e916483ca9934aad9bafddfbe1de01e012d44876422332b}{Interpolate::kFractional}});}
\DoxyCodeLine{00283\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(velocity\_track\_mult);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ Output*\ voice\_amplitude\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}voice\_amplitude"{}});}
\DoxyCodeLine{00286\ \ \ \ \ cr::Multiply*\ amplitude\ =\ \textcolor{keyword}{new}\ cr::Multiply();}
\DoxyCodeLine{00287\ \ \ \ \ amplitude-\/>plug(velocity\_track\_mult,\ 0);}
\DoxyCodeLine{00288\ \ \ \ \ amplitude-\/>plug(voice\_amplitude,\ 1);}
\DoxyCodeLine{00289\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(amplitude);}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ amplitude\_envelope\_\ =\ envelopes\_[0];}
\DoxyCodeLine{00292\ \ \ \ \ amplitude\_envelope\_-\/>\mbox{\hyperlink{classvital_1_1_envelope_module_ab4bc4783a4a390018e123b52ecf1f040}{setControlRate}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_a0ccc3140079d85c64283ad08414df5c1}{Processor}}*\ control\_amplitude\ =\ \textcolor{keyword}{new}\ SmoothMultiply();}
\DoxyCodeLine{00295\ \ \ \ \ control\_amplitude-\/>plug(amplitude\_envelope\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_envelope_a8793a4d4f6325537e70b6589a3b44ed6a933594d63633f11d0e8e6abe5b116230}{Envelope::kValue}}),\ \mbox{\hyperlink{classvital_1_1_smooth_multiply_a94d462c812e8d5ec665cc3ed013a2964ae44907666208945546f02960c4012ee3}{SmoothMultiply::kAudioRate}});}
\DoxyCodeLine{00296\ \ \ \ \ control\_amplitude-\/>plug(amplitude,\ \mbox{\hyperlink{classvital_1_1_smooth_multiply_a94d462c812e8d5ec665cc3ed013a2964a2a38e1f36b8a45028ece1a6ee0be4d9e}{SmoothMultiply::kControlRate}});}
\DoxyCodeLine{00297\ \ \ \ \ control\_amplitude-\/>plug(\mbox{\hyperlink{classvital_1_1_voice_handler_a976723d6f281467f174826548bacfad0}{reset}}(),\ \mbox{\hyperlink{classvital_1_1_smooth_multiply_a94d462c812e8d5ec665cc3ed013a2964a620b7d45054c2e451c24a554735dc2f4}{SmoothMultiply::kReset}});}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ amplitude\_\ =\ \textcolor{keyword}{new}\ Square();}
\DoxyCodeLine{00300\ \ \ \ \ amplitude\_-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(control\_amplitude);}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(control\_amplitude);}
\DoxyCodeLine{00303\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_aa462c09a5f03ce4e09697f56b5459e57}{addProcessor}}(amplitude\_);}
\DoxyCodeLine{00304\ \ \ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00312\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a379361c03974b40b279b5dd4280c8233}{SynthVoiceHandler::process}}(\textcolor{keywordtype}{int}\ num\_samples)\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__int}{poly\_mask}}\ reset\_mask\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a976723d6f281467f174826548bacfad0}{reset}}()-\/>\mbox{\hyperlink{structvital_1_1_output_ab5d8c509c6b262ea89dbbfafbc24673b}{trigger\_mask}};}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keywordflow}{if}\ (reset\_mask.\mbox{\hyperlink{structvital_1_1poly__int_a2fab54be2efa9a05ed842b91e4bad62d}{anyMask}}())}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a2b6195a578e16b6ad1490a8a1d20b1cc}{resetFeedbacks}}(reset\_mask);}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a6c379397d5efcd674dcf5e5f3511444a}{VoiceHandler::process}}(num\_samples);}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_voices\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_a4b764cef0010cc39069eda5a21217a0a}{getNumActiveVoices}}();}
\DoxyCodeLine{00319\ \ \ \ \ num\_voices\_.\mbox{\hyperlink{structvital_1_1_output_a1bc2c3a75ee0525ecbfb24fc841b1fe4}{buffer}}[0]\ =\ num\_voices;}
\DoxyCodeLine{00320\ \ \ \ \ note\_retriggered\_.\mbox{\hyperlink{structvital_1_1_output_a60830e1cea540817709295d17510ce27}{clearTrigger}}();}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_voices\ ==\ 0)\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ status\_source\ :\ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>status\_outputs)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ status\_source.second-\/>clear();}
\DoxyCodeLine{00325\ \ \ \ \ \}}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ last\_active\_voice\_mask\_\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_af9dad893ef3471a4f17d5abbf00d39df}{getCurrentVoiceMask}}();}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ status\_source\ :\ \mbox{\hyperlink{classvital_1_1_synth_module_a4062f5371989f6445dfef9943a14d468}{data\_}}-\/>status\_outputs)}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ status\_source.second-\/>update(last\_active\_voice\_mask\_);}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor\ :\ enabled\_modulation\_processors\_)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__float}{poly\_float}}*\ buffer\ =\ processor-\/>output()-\/>buffer;}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (processor-\/>isControlRate()\ ||\ processor-\/>isPolyphonicModulation())\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__float}{poly\_float}}\ masked\_value\ =\ buffer[0]\ \&\ last\_active\_voice\_mask\_;}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ buffer[0]\ =\ masked\_value\ +\ \mbox{\hyperlink{namespacevital_1_1utils_ab69168d986d091e670bdf79c53abe7f6}{utils::swapVoices}}(masked\_value);}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_samples;\ ++i)\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__float}{poly\_float}}\ masked\_value\ =\ buffer[i]\ \&\ last\_active\_voice\_mask\_;}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ buffer[i]\ =\ masked\_value\ +\ \mbox{\hyperlink{namespacevital_1_1utils_ab69168d986d091e670bdf79c53abe7f6}{utils::swapVoices}}(masked\_value);}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00344\ \ \ \ \ \}}
\DoxyCodeLine{00345\ \ \ \}}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00350\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_abea0ee8ea0cec0aadb23326ab39cc264}{SynthVoiceHandler::noteOn}}(\textcolor{keywordtype}{int}\ note,\ \mbox{\hyperlink{namespacevital_afcc17475a10ef776bbd2f11b64c1ddfb}{mono\_float}}\ velocity,\ \textcolor{keywordtype}{int}\ sample,\ \textcolor{keywordtype}{int}\ channel)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classvital_1_1_voice_handler_a2479ebc5f317538af4b0b22f79593a9d}{getNumPressedNotes}}()\ <\ \mbox{\hyperlink{classvital_1_1_voice_handler_a4ec4ddd7defb859efe4ebe3feddd64c1}{polyphony}}()\ ||\ !\mbox{\hyperlink{classvital_1_1_voice_handler_a8aacdc084da8809bd2becc881902da5c}{legato}}())}
\DoxyCodeLine{00352\ \ \ \ \ \ \ note\_retriggered\_.\mbox{\hyperlink{structvital_1_1_output_a16f8b90753a7d427090e088f82b011de}{trigger}}(\mbox{\hyperlink{namespacevital_1_1constants_a0ba15cafa5e21c3a54ff0e6208b860fa}{constants::kFullMask}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}},\ sample);}
\DoxyCodeLine{00353\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a2b1d804067ab284731a3ed878fd09657}{VoiceHandler::noteOn}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a0864b01c35b14dd08f928d9a860c88a0}{velocity}},\ sample,\ \mbox{\hyperlink{classvital_1_1_voice_handler_a431b6edf05e8de9363bd26dc0ac649f1}{channel}});}
\DoxyCodeLine{00354\ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00359\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a278dc53e817b2df71d48ed06969cb4d6}{SynthVoiceHandler::noteOff}}(\textcolor{keywordtype}{int}\ note,\ \mbox{\hyperlink{namespacevital_afcc17475a10ef776bbd2f11b64c1ddfb}{mono\_float}}\ lift,\ \textcolor{keywordtype}{int}\ sample,\ \textcolor{keywordtype}{int}\ channel)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classvital_1_1_voice_handler_a2479ebc5f317538af4b0b22f79593a9d}{getNumPressedNotes}}()\ >\ \mbox{\hyperlink{classvital_1_1_voice_handler_a4ec4ddd7defb859efe4ebe3feddd64c1}{polyphony}}()\ \&\&\ \mbox{\hyperlink{classvital_1_1_voice_handler_a53e3a45424bf758ea60616bc381b1b0e}{isNotePlaying}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}})\ \&\&\ !\mbox{\hyperlink{classvital_1_1_voice_handler_a8aacdc084da8809bd2becc881902da5c}{legato}}())}
\DoxyCodeLine{00361\ \ \ \ \ \ \ note\_retriggered\_.\mbox{\hyperlink{structvital_1_1_output_a16f8b90753a7d427090e088f82b011de}{trigger}}(\mbox{\hyperlink{namespacevital_1_1constants_a0ba15cafa5e21c3a54ff0e6208b860fa}{constants::kFullMask}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}},\ sample);}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_voice_handler_a797a35d52f58f52d08e2e74fd109e033}{VoiceHandler::noteOff}}(\mbox{\hyperlink{classvital_1_1_voice_handler_a146223bc6aa55e38b70365f2b30198b0}{note}},\ \mbox{\hyperlink{classvital_1_1_voice_handler_ad144feadb03921b4e7e1efef2c7fa0e9}{lift}},\ sample,\ \mbox{\hyperlink{classvital_1_1_voice_handler_a431b6edf05e8de9363bd26dc0ac649f1}{channel}});}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00370\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a2fe15deb6ce30075624da36ab4f4fdad}{SynthVoiceHandler::shouldAccumulate}}(\mbox{\hyperlink{structvital_1_1_output}{Output}}*\ output)\ \{}
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}-\/>\mbox{\hyperlink{structvital_1_1_output_a2a95c52370b24f681a552dd9bfa6cc86}{owner}}\ ==\ amplitude\_envelope\_)}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classvital_1_1_voice_handler_adf7416833ec7abc5d8b34c604720b969}{VoiceHandler::shouldAccumulate}}(\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}});}
\DoxyCodeLine{00375\ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00380\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_acb26d44308b97853d4a03eb310ba8798}{SynthVoiceHandler::correctToTime}}(\textcolor{keywordtype}{double}\ seconds)\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_aba56646bec643d6d416700b782ed978b}{kNumLfos}};\ ++i)}
\DoxyCodeLine{00382\ \ \ \ \ \ \ lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_synth_voice_handler_acb26d44308b97853d4a03eb310ba8798}{correctToTime}}(seconds);}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_a685d103a6454a0b6e8e370cb574c21b5}{kNumRandomLfos}};\ ++i)}
\DoxyCodeLine{00385\ \ \ \ \ \ \ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_synth_voice_handler_acb26d44308b97853d4a03eb310ba8798}{correctToTime}}(seconds);}
\DoxyCodeLine{00386\ \ \ \}}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00391\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a3b1fb83d1c799af61678897037a5c544}{SynthVoiceHandler::disableUnnecessaryModSources}}()\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_aba56646bec643d6d416700b782ed978b}{kNumLfos}};\ ++i)}
\DoxyCodeLine{00393\ \ \ \ \ \ \ lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_synth_module_ad4f615773fab56c5a41aa4229bd26089}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ \mbox{\hyperlink{namespacevital_a9acbf7e6b849148921f335c101e02fe6}{kNumEnvelopes}};\ ++i)}
\DoxyCodeLine{00396\ \ \ \ \ \ \ envelopes\_[i]-\/>\mbox{\hyperlink{classvital_1_1_synth_module_ad4f615773fab56c5a41aa4229bd26089}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{namespacevital_a685d103a6454a0b6e8e370cb574c21b5}{kNumRandomLfos}};\ ++i)}
\DoxyCodeLine{00399\ \ \ \ \ \ \ random\_lfos\_[i]-\/>\mbox{\hyperlink{classvital_1_1_synth_module_ad4f615773fab56c5a41aa4229bd26089}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \ \ random\_-\/>\mbox{\hyperlink{classvital_1_1_processor_ab5a6caa5b2e9cdfba5cf770363034d98}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00402\ \ \ \}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00407\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a638629f21869594b30b1fc567fc13930}{SynthVoiceHandler::disableModSource}}(\textcolor{keyword}{const}\ std::string\&\ source)\ \{}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordflow}{if}\ (source\ !=\ \textcolor{stringliteral}{"{}env\_1"{}})}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_synth_module_aa91319dc5d300584b4897e1a0c53afe8}{getModulationSource}}(source)-\/>\mbox{\hyperlink{structvital_1_1_output_a2a95c52370b24f681a552dd9bfa6cc86}{owner}}-\/>\mbox{\hyperlink{classvital_1_1_processor_ab5a6caa5b2e9cdfba5cf770363034d98}{enable}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00410\ \ \ \}}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00415\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_aaa1342ff95c9470e9ecfb461ef20e2da}{SynthVoiceHandler::enableModulationConnection}}(\mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ enabled\_modulation\_processors\_.push\_back(processor);}
\DoxyCodeLine{00417\ \ \ \}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00422\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_ad218c7e5c27e962d0e099978dfaee87c}{SynthVoiceHandler::disableModulationConnection}}(\mbox{\hyperlink{classvital_1_1_modulation_connection_processor}{ModulationConnectionProcessor}}*\ processor)\ \{}
\DoxyCodeLine{00423\ \ \ \ \ enabled\_modulation\_processors\_.remove(processor);}
\DoxyCodeLine{00424\ \ \ \}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \textcolor{keywordtype}{void}\ SynthVoiceHandler::setupPolyModulationReadouts()\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \mbox{\hyperlink{namespacevital_a4f29d888b099153b9d0980a73fdc89aa}{output\_map}}\&\ poly\_mods\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a9878e8bee7632526ee410d6e39b78b31}{SynthModule::getPolyModulations}}();}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ poly\_mods)}
\DoxyCodeLine{00430\ \ \ \ \ \ \ poly\_readouts\_[mod.first]\ =\ \mbox{\hyperlink{classvital_1_1_voice_handler_ade40a08b9e01e1520ae1d5c18a37036f}{registerControlRateOutput}}(mod.second,\ mod.second-\/>owner-\/>enabled());}
\DoxyCodeLine{00431\ \ \ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00436\ \ \ \mbox{\hyperlink{namespacevital_a4f29d888b099153b9d0980a73fdc89aa}{output\_map}}\&\ \mbox{\hyperlink{classvital_1_1_synth_voice_handler_a1fbe1642e7e7472edf55240ac4f359cb}{SynthVoiceHandler::getPolyModulations}}()\ \{}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keywordflow}{return}\ poly\_readouts\_;}
\DoxyCodeLine{00438\ \ \ \}}
\DoxyCodeLine{00439\ \}\ \textcolor{comment}{//\ namespace\ vital}}

\end{DoxyCode}
