<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vital: /Users/davidvogel/repos/VitalHelp/src/common/wavetable/wave_source.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DREY265MGG"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DREY265MGG",{})</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Vital
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('wave__source_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">wave_source.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="wave__source_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">Summary:</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">WaveSource and WaveSourceKeyframe provide a direct representation of wavetables via WaveFrames. By storing entire waveforms and supporting time or frequency domain interpolation (including cubic methods for smoothness), they enable flexible and sophisticated transitions between keyframes. This results in dynamic and evolving sounds that can be tailored by controlling interpolation modes and parameters.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> */</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="wave__source_8h.html">wave_source.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;<a class="code" href="wave__frame_8h.html">wave_frame.h</a>&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="wavetable__component__factory_8h.html">wavetable_component_factory.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="foldopen" id="foldopen00010" data-start="{" data-end="}">
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno"><a class="line" href="class_wave_source.html#ae555f5a13f70e98bd1f64d6ace194648">   10</a></span><a class="code hl_function" href="class_wave_source.html#ae555f5a13f70e98bd1f64d6ace194648">WaveSource::WaveSource</a>() {</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>  <a class="code hl_variable" href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">compute_frame_</a> = std::make_unique&lt;WaveSourceKeyframe&gt;();</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>  <a class="code hl_variable" href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">interpolation_mode_</a> = <a class="code hl_enumvalue" href="class_wave_source.html#add4f921a9aaac5d27e4ae82704779d90a8ff2606e13b37e886ce6ae1568450739">kFrequency</a>; <span class="comment">// Default to frequency interpolation.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>}</div>
</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="class_wave_source.html#a17c8638d956e4de07f99f8b2215c9d44">   15</a></span><a class="code hl_function" href="class_wave_source.html#a17c8638d956e4de07f99f8b2215c9d44">WaveSource::~WaveSource</a>() { }</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="foldopen" id="foldopen00017" data-start="{" data-end="}">
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno"><a class="line" href="class_wave_source.html#a9bdbe4a5e4d1cacfdb38a856abd08104">   17</a></span><a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* <a class="code hl_function" href="class_wave_source.html#a9bdbe4a5e4d1cacfdb38a856abd08104">WaveSource::createKeyframe</a>(<span class="keywordtype">int</span> position) {</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>  <a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>* keyframe = <span class="keyword">new</span> <a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>();</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>  <span class="comment">// Renders the initial WaveFrame at this position into the keyframe&#39;s frame.</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>  <a class="code hl_function" href="class_wave_source.html#a7015bd634946b71148bf58f4279c34fe">render</a>(keyframe-&gt;<a class="code hl_function" href="class_wave_source_keyframe.html#ac2f19ba59f1866a789cdeb38fef24e12">wave_frame</a>(), position);</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>  <span class="keywordflow">return</span> keyframe;</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>}</div>
</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="foldopen" id="foldopen00024" data-start="{" data-end="}">
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="class_wave_source.html#a7015bd634946b71148bf58f4279c34fe">   24</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source.html#a7015bd634946b71148bf58f4279c34fe">WaveSource::render</a>(<a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* wave_frame, <span class="keywordtype">float</span> position) {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>  <span class="comment">// Set the interpolation mode for the compute_frame_ and interpolate into it.</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>  <a class="code hl_variable" href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">compute_frame_</a>-&gt;<a class="code hl_function" href="class_wave_source_keyframe.html#a8375d5c3ffe9ecaaa9d3cffae9c1c649">setInterpolationMode</a>(<a class="code hl_variable" href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">interpolation_mode_</a>);</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>  <a class="code hl_function" href="class_wavetable_component.html#a59b735ee67cc2281379418304de76b6d">interpolate</a>(<a class="code hl_variable" href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">compute_frame_</a>.get(), position);</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  wave_frame-&gt;<a class="code hl_function" href="classvital_1_1_wave_frame.html#a097b35df7e1e30b50991550a21d4927b">copy</a>(<a class="code hl_variable" href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">compute_frame_</a>-&gt;wave_frame());</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>}</div>
</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="foldopen" id="foldopen00031" data-start="{" data-end="}">
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="class_wave_source.html#ae6fed21b5af63d52515f7f956f40116e">   31</a></span><a class="code hl_enumeration" href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bd">WavetableComponentFactory::ComponentType</a> <a class="code hl_function" href="class_wave_source.html#ae6fed21b5af63d52515f7f956f40116e">WaveSource::getType</a>() {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bda4abc444b080aeb6684a0305d20feed03">WavetableComponentFactory::kWaveSource</a>;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>}</div>
</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="foldopen" id="foldopen00035" data-start="{" data-end="}">
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="class_wave_source.html#a04562d7646704ac5dab012c05358fe11">   35</a></span><a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> <a class="code hl_function" href="class_wave_source.html#a04562d7646704ac5dab012c05358fe11">WaveSource::stateToJson</a>() {</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>  <a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data = <a class="code hl_function" href="class_wavetable_component.html#a1c7bd3ba09cf3093d5aea225ee876b02">WavetableComponent::stateToJson</a>();</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  data[<span class="stringliteral">&quot;interpolation&quot;</span>] = <a class="code hl_variable" href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">interpolation_mode_</a>;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  <span class="keywordflow">return</span> data;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>}</div>
</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="foldopen" id="foldopen00041" data-start="{" data-end="}">
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="class_wave_source.html#a4e5bab83a373220e2dbe774a75d29e2d">   41</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source.html#a4e5bab83a373220e2dbe774a75d29e2d">WaveSource::jsonToState</a>(<a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data) {</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  <a class="code hl_function" href="class_wavetable_component.html#a656616fbc4a9d37b7e76c4179f496196">WavetableComponent::jsonToState</a>(data);</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  <a class="code hl_variable" href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">interpolation_mode_</a> = data[<span class="stringliteral">&quot;interpolation&quot;</span>];</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  <a class="code hl_variable" href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">compute_frame_</a>-&gt;setInterpolationMode(<a class="code hl_variable" href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">interpolation_mode_</a>);</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>}</div>
</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="foldopen" id="foldopen00047" data-start="{" data-end="}">
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="class_wave_source.html#a63ed7a33886879e253bb602143b026d5">   47</a></span><a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* <a class="code hl_function" href="class_wave_source.html#a63ed7a33886879e253bb602143b026d5">WaveSource::getWaveFrame</a>(<span class="keywordtype">int</span> index) {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_wave_source.html#a715a55593b9018c4a380be67c5b948f9">getKeyframe</a>(index)-&gt;<a class="code hl_function" href="class_wave_source_keyframe.html#ac2f19ba59f1866a789cdeb38fef24e12">wave_frame</a>();</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>}</div>
</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="foldopen" id="foldopen00051" data-start="{" data-end="}">
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="class_wave_source.html#a715a55593b9018c4a380be67c5b948f9">   51</a></span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>* <a class="code hl_function" href="class_wave_source.html#a715a55593b9018c4a380be67c5b948f9">WaveSource::getKeyframe</a>(<span class="keywordtype">int</span> index) {</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* wavetable_keyframe = <a class="code hl_variable" href="class_wavetable_component.html#a9186070f6ca3742cfd0ab22cbdcbb875">keyframes_</a>[index].get();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(wavetable_keyframe);</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>}</div>
</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="foldopen" id="foldopen00056" data-start="{" data-end="}">
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a1b574fe8cd5c6549bad0c0e161caa9ee">   56</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a1b574fe8cd5c6549bad0c0e161caa9ee">WaveSourceKeyframe::copy</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* keyframe) {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <span class="comment">// Copies the WaveFrame data from another WaveSourceKeyframe.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>* source = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(keyframe);</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;<a class="code hl_function" href="class_wave_source_keyframe.html#a1b574fe8cd5c6549bad0c0e161caa9ee">copy</a>(source-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get());</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>}</div>
</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="foldopen" id="foldopen00062" data-start="{" data-end="}">
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a91a03b2129322973ebe9cb8c72ba7b50">   62</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a91a03b2129322973ebe9cb8c72ba7b50">WaveSourceKeyframe::linearTimeInterpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* from, <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* to, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  <span class="comment">// Perform a simple linear interpolation of time-domain samples between two WaveFrames.</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>; ++i)</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;time_domain[i] = <a class="code hl_function" href="class_wavetable_keyframe.html#a06dcc7e7c618cedfa746b46f7cc4c79e">linearTween</a>(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i], to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i], t);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;toFrequencyDomain();</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>}</div>
</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="foldopen" id="foldopen00069" data-start="{" data-end="}">
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a21b939df52c0df8a8d01dbf8aec1ffcd">   69</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a21b939df52c0df8a8d01dbf8aec1ffcd">WaveSourceKeyframe::cubicTimeInterpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* prev, <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* from,</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>                                              <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* to, <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* next,</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>                                              <span class="keywordtype">float</span> range_prev, <span class="keywordtype">float</span> range, <span class="keywordtype">float</span> range_next, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <span class="comment">// Cubic interpolation for an even smoother transition in the time domain.</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>; ++i) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;time_domain[i] = <a class="code hl_function" href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">cubicTween</a>(prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i], from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i],</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>                                             to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i], next-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i],</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                                             range_prev, range, range_next, t);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  }</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;toFrequencyDomain();</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>}</div>
</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="foldopen" id="foldopen00082" data-start="{" data-end="}">
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a25bf945cc7e05f3e24785e2c18f1ddf5">   82</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a25bf945cc7e05f3e24785e2c18f1ddf5">WaveSourceKeyframe::linearFrequencyInterpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* from,</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>                                                    <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* to, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="comment">// Linear interpolation in frequency domain: smoothly blend magnitudes and phases of harmonics.</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="classvital_1_1_wave_frame.html#addeb13945e5fe1e653aa4b2edd487ede">vital::WaveFrame::kNumRealComplex</a>; ++i) {</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="keywordtype">float</span> amplitude_from = sqrtf(std::abs(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keywordtype">float</span> amplitude_to = sqrtf(std::abs(to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordtype">float</span> amplitude = <a class="code hl_function" href="class_wavetable_keyframe.html#a06dcc7e7c618cedfa746b46f7cc4c79e">linearTween</a>(amplitude_from, amplitude_to, t);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    amplitude *= amplitude;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// Interpolate DC and last harmonic separately for consistency.</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keywordtype">float</span> phase_from = std::arg(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordtype">float</span> phase_delta = std::arg(std::conj(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]) * to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="keywordtype">float</span> phase = phase_from + t * phase_delta;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="keywordflow">if</span> (amplitude_from == 0)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>      phase = std::arg(to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[i] = std::polar(amplitude, phase);</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  }</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  <span class="keywordtype">float</span> dc_from = from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  <span class="keywordtype">float</span> dc_to = to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[0] = <a class="code hl_function" href="class_wavetable_keyframe.html#a06dcc7e7c618cedfa746b46f7cc4c79e">linearTween</a>(dc_from, dc_to, t);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="keywordtype">int</span> last = <a class="code hl_variable" href="classvital_1_1_wave_frame.html#addeb13945e5fe1e653aa4b2edd487ede">vital::WaveFrame::kNumRealComplex</a> - 1;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keywordtype">float</span> last_harmonic_from = from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  <span class="keywordtype">float</span> last_harmonic_to = to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[last] = <a class="code hl_function" href="class_wavetable_keyframe.html#a06dcc7e7c618cedfa746b46f7cc4c79e">linearTween</a>(last_harmonic_from, last_harmonic_to, t);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;toTimeDomain();</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>}</div>
</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="foldopen" id="foldopen00112" data-start="{" data-end="}">
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#ae736aa8a1e0efb5162022d4cae795729">  112</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#ae736aa8a1e0efb5162022d4cae795729">WaveSourceKeyframe::cubicFrequencyInterpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* prev, <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* from,</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                                                   <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* to, <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* next,</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                                                   <span class="keywordtype">float</span> range_prev, <span class="keywordtype">float</span> range, <span class="keywordtype">float</span> range_next, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <span class="comment">// Cubic interpolation in frequency domain for very smooth harmonic transitions across multiple frames.</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="classvital_1_1_wave_frame.html#addeb13945e5fe1e653aa4b2edd487ede">vital::WaveFrame::kNumRealComplex</a>; ++i) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordtype">float</span> amplitude_prev = sqrtf(std::abs(prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordtype">float</span> amplitude_from = sqrtf(std::abs(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordtype">float</span> amplitude_to = sqrtf(std::abs(to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordtype">float</span> amplitude_next = sqrtf(std::abs(next-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]));</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="keywordtype">float</span> amplitude = <a class="code hl_function" href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">cubicTween</a>(amplitude_prev, amplitude_from, amplitude_to, amplitude_next,</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                                 range_prev, range, range_next, t);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    amplitude *= amplitude;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">// Calculate phase transitions similarly, ensuring continuous phase evolution.</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordtype">float</span> phase_delta_from = std::arg(std::conj(prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]) * from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordtype">float</span> phase_delta_to = std::arg(std::conj(from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]) * to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordtype">float</span> phase_delta_next = std::arg(std::conj(to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]) * next-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordtype">float</span> phase_prev = std::arg(prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[i]);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordtype">float</span> phase_from = phase_prev;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">if</span> (amplitude_from)</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>      phase_from += phase_delta_from;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordtype">float</span> phase_to = phase_from;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">if</span> (amplitude_to)</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      phase_to += phase_delta_to;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordtype">float</span> phase_next = phase_to;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="keywordflow">if</span> (amplitude_next)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>      phase_next += phase_delta_next;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordtype">float</span> phase = <a class="code hl_function" href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">cubicTween</a>(phase_prev, phase_from, phase_to, phase_next, range_prev, range, range_next, t);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[i] = std::polar(amplitude, phase);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="comment">// Handle DC and last harmonic separately with cubic interpolation.</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordtype">float</span> dc_prev = prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <span class="keywordtype">float</span> dc_from = from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="keywordtype">float</span> dc_to = to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="keywordtype">float</span> dc_next = next-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[0].real();</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[0] = <a class="code hl_function" href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">cubicTween</a>(dc_prev, dc_from, dc_to, dc_next, range_prev, range, range_next, t);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  <span class="keywordtype">int</span> last = <a class="code hl_variable" href="classvital_1_1_wave_frame.html#addeb13945e5fe1e653aa4b2edd487ede">vital::WaveFrame::kNumRealComplex</a> - 1;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  <span class="keywordtype">float</span> last_harmonic_prev = prev-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keywordtype">float</span> last_harmonic_from = from-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  <span class="keywordtype">float</span> last_harmonic_to = to-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  <span class="keywordtype">float</span> last_harmonic_next = next-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">frequency_domain</a>[last].real();</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;frequency_domain[last] = <a class="code hl_function" href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">cubicTween</a>(last_harmonic_prev, last_harmonic_from,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                                                   last_harmonic_to, last_harmonic_next,</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                                                   range_prev, range, range_next, t);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;toTimeDomain();</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>}</div>
</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="foldopen" id="foldopen00162" data-start="{" data-end="}">
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#aefa83b8a0623b6becd80c462236e014a">  162</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#aefa83b8a0623b6becd80c462236e014a">WaveSourceKeyframe::interpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* from_keyframe,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                                     <span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* to_keyframe, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>* from = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(from_keyframe);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>* to = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(to_keyframe);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_wave_source_keyframe.html#a1594ee99df6e7bf5145f2eca3e383f25">interpolation_mode_</a> == <a class="code hl_enumvalue" href="class_wave_source.html#add4f921a9aaac5d27e4ae82704779d90a8ff2606e13b37e886ce6ae1568450739">WaveSource::kFrequency</a>)</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <a class="code hl_function" href="class_wave_source_keyframe.html#a25bf945cc7e05f3e24785e2c18f1ddf5">linearFrequencyInterpolate</a>(from-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get(), to-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get(), t);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <a class="code hl_function" href="class_wave_source_keyframe.html#a91a03b2129322973ebe9cb8c72ba7b50">linearTimeInterpolate</a>(from-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get(), to-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get(), t);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>}</div>
</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="foldopen" id="foldopen00173" data-start="{" data-end="}">
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a1d98f2353ed1314db13fe28782cce7f3">  173</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a1d98f2353ed1314db13fe28782cce7f3">WaveSourceKeyframe::smoothInterpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* prev_keyframe,</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                                           <span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* from_keyframe,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                           <span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* to_keyframe,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                                           <span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* next_keyframe, <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="comment">// Uses cubic interpolation if possible for even smoother transitions.</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* prev = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(prev_keyframe)-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get();</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* from = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(from_keyframe)-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get();</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* to = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(to_keyframe)-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get();</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <span class="keyword">const</span> <a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* next = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_source_keyframe.html">WaveSourceKeyframe</a>*<span class="keyword">&gt;</span>(next_keyframe)-&gt;<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>.get();</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordtype">float</span> range_prev = from_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>() - prev_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="keywordtype">float</span> range = to_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>() - from_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>();</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <span class="keywordtype">float</span> range_next = next_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>() - to_keyframe-&gt;<a class="code hl_function" href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">position</a>();</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_wave_source_keyframe.html#a1594ee99df6e7bf5145f2eca3e383f25">interpolation_mode_</a> == <a class="code hl_enumvalue" href="class_wave_source.html#add4f921a9aaac5d27e4ae82704779d90a8ff2606e13b37e886ce6ae1568450739">WaveSource::kFrequency</a>)</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_function" href="class_wave_source_keyframe.html#ae736aa8a1e0efb5162022d4cae795729">cubicFrequencyInterpolate</a>(prev, from, to, next, range_prev, range, range_next, t);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <a class="code hl_function" href="class_wave_source_keyframe.html#a21b939df52c0df8a8d01dbf8aec1ffcd">cubicTimeInterpolate</a>(prev, from, to, next, range_prev, range, range_next, t);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>}</div>
</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="foldopen" id="foldopen00193" data-start="{" data-end="}">
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a42bb1c4473019173e7b0435aae21ea1a">  193</a></span><a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> <a class="code hl_function" href="class_wave_source_keyframe.html#a42bb1c4473019173e7b0435aae21ea1a">WaveSourceKeyframe::stateToJson</a>() {</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="comment">// Serialize the waveforms time-domain data as Base64.</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  String encoded = Base64::toBase64(<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;time_domain, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  <a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data = <a class="code hl_function" href="class_wavetable_keyframe.html#ab12d53e98f7188d011cd3c69e86d2bda">WavetableKeyframe::stateToJson</a>();</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  data[<span class="stringliteral">&quot;wave_data&quot;</span>] = encoded.toStdString();</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keywordflow">return</span> data;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>}</div>
</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="foldopen" id="foldopen00201" data-start="{" data-end="}">
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="class_wave_source_keyframe.html#a90a5537b7612e577b7697443e9fc2025">  201</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_source_keyframe.html#a90a5537b7612e577b7697443e9fc2025">WaveSourceKeyframe::jsonToState</a>(<a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data) {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <a class="code hl_function" href="class_wavetable_keyframe.html#ad0e81b3bdc5fe9a3d901dec69d9b7b5b">WavetableKeyframe::jsonToState</a>(data);</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  MemoryOutputStream decoded(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  std::string wave_data = data[<span class="stringliteral">&quot;wave_data&quot;</span>];</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  Base64::convertFromBase64(decoded, wave_data);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  memcpy(<a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;time_domain, decoded.getData(), <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  <a class="code hl_variable" href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">wave_frame_</a>-&gt;toFrequencyDomain();</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>}</div>
</div>
<div class="ttc" id="aclass_wave_source_html_a04562d7646704ac5dab012c05358fe11"><div class="ttname"><a href="class_wave_source.html#a04562d7646704ac5dab012c05358fe11">WaveSource::stateToJson</a></div><div class="ttdeci">json stateToJson() override</div><div class="ttdoc">Serializes the components state and all keyframes to a JSON object.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:35</div></div>
<div class="ttc" id="aclass_wave_source_html_a11755dbac312e2988927c173e4c8e30e"><div class="ttname"><a href="class_wave_source.html#a11755dbac312e2988927c173e4c8e30e">WaveSource::compute_frame_</a></div><div class="ttdeci">std::unique_ptr&lt; WaveSourceKeyframe &gt; compute_frame_</div><div class="ttdoc">A keyframe for intermediate interpolation computations.</div><div class="ttdef"><b>Definition</b> wave_source.h:79</div></div>
<div class="ttc" id="aclass_wave_source_html_a17c8638d956e4de07f99f8b2215c9d44"><div class="ttname"><a href="class_wave_source.html#a17c8638d956e4de07f99f8b2215c9d44">WaveSource::~WaveSource</a></div><div class="ttdeci">virtual ~WaveSource()</div><div class="ttdef"><b>Definition</b> wave_source.cpp:15</div></div>
<div class="ttc" id="aclass_wave_source_html_a4664e91a2660a56e2a721b6c10726955"><div class="ttname"><a href="class_wave_source.html#a4664e91a2660a56e2a721b6c10726955">WaveSource::interpolation_mode_</a></div><div class="ttdeci">InterpolationMode interpolation_mode_</div><div class="ttdoc">The mode of interpolation.</div><div class="ttdef"><b>Definition</b> wave_source.h:80</div></div>
<div class="ttc" id="aclass_wave_source_html_a4e5bab83a373220e2dbe774a75d29e2d"><div class="ttname"><a href="class_wave_source.html#a4e5bab83a373220e2dbe774a75d29e2d">WaveSource::jsonToState</a></div><div class="ttdeci">void jsonToState(json data) override</div><div class="ttdoc">Restores the components state from a JSON object.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:41</div></div>
<div class="ttc" id="aclass_wave_source_html_a63ed7a33886879e253bb602143b026d5"><div class="ttname"><a href="class_wave_source.html#a63ed7a33886879e253bb602143b026d5">WaveSource::getWaveFrame</a></div><div class="ttdeci">vital::WaveFrame * getWaveFrame(int index)</div><div class="ttdoc">Gets a WaveFrame from a specified keyframe index.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:47</div></div>
<div class="ttc" id="aclass_wave_source_html_a7015bd634946b71148bf58f4279c34fe"><div class="ttname"><a href="class_wave_source.html#a7015bd634946b71148bf58f4279c34fe">WaveSource::render</a></div><div class="ttdeci">void render(vital::WaveFrame *wave_frame, float position) override</div><div class="ttdoc">Renders the waveform at a given position into a WaveFrame.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:24</div></div>
<div class="ttc" id="aclass_wave_source_html_a715a55593b9018c4a380be67c5b948f9"><div class="ttname"><a href="class_wave_source.html#a715a55593b9018c4a380be67c5b948f9">WaveSource::getKeyframe</a></div><div class="ttdeci">WaveSourceKeyframe * getKeyframe(int index)</div><div class="ttdoc">Retrieves a WaveSourceKeyframe by index.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:51</div></div>
<div class="ttc" id="aclass_wave_source_html_a9bdbe4a5e4d1cacfdb38a856abd08104"><div class="ttname"><a href="class_wave_source.html#a9bdbe4a5e4d1cacfdb38a856abd08104">WaveSource::createKeyframe</a></div><div class="ttdeci">WavetableKeyframe * createKeyframe(int position) override</div><div class="ttdoc">Creates a new keyframe at a given position.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:17</div></div>
<div class="ttc" id="aclass_wave_source_html_add4f921a9aaac5d27e4ae82704779d90a8ff2606e13b37e886ce6ae1568450739"><div class="ttname"><a href="class_wave_source.html#add4f921a9aaac5d27e4ae82704779d90a8ff2606e13b37e886ce6ae1568450739">WaveSource::kFrequency</a></div><div class="ttdeci">@ kFrequency</div><div class="ttdoc">Interpolate in frequency domain.</div><div class="ttdef"><b>Definition</b> wave_source.h:33</div></div>
<div class="ttc" id="aclass_wave_source_html_ae555f5a13f70e98bd1f64d6ace194648"><div class="ttname"><a href="class_wave_source.html#ae555f5a13f70e98bd1f64d6ace194648">WaveSource::WaveSource</a></div><div class="ttdeci">WaveSource()</div><div class="ttdoc">Constructs a WaveSource with a default frequency-domain interpolation mode.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:10</div></div>
<div class="ttc" id="aclass_wave_source_html_ae6fed21b5af63d52515f7f956f40116e"><div class="ttname"><a href="class_wave_source.html#ae6fed21b5af63d52515f7f956f40116e">WaveSource::getType</a></div><div class="ttdeci">WavetableComponentFactory::ComponentType getType() override</div><div class="ttdoc">Returns the type of this WavetableComponent.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:31</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html"><div class="ttname"><a href="class_wave_source_keyframe.html">WaveSourceKeyframe</a></div><div class="ttdoc">A keyframe that holds a single WaveFrame and supports various interpolation methods.</div><div class="ttdef"><b>Definition</b> wave_source.h:92</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a1594ee99df6e7bf5145f2eca3e383f25"><div class="ttname"><a href="class_wave_source_keyframe.html#a1594ee99df6e7bf5145f2eca3e383f25">WaveSourceKeyframe::interpolation_mode_</a></div><div class="ttdeci">WaveSource::InterpolationMode interpolation_mode_</div><div class="ttdoc">The mode (time or frequency) used for this keyframe's interpolation.</div><div class="ttdef"><b>Definition</b> wave_source.h:199</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a1b574fe8cd5c6549bad0c0e161caa9ee"><div class="ttname"><a href="class_wave_source_keyframe.html#a1b574fe8cd5c6549bad0c0e161caa9ee">WaveSourceKeyframe::copy</a></div><div class="ttdeci">void copy(const WavetableKeyframe *keyframe) override</div><div class="ttdoc">Copies the state from another keyframe of the same type.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:56</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a1d98f2353ed1314db13fe28782cce7f3"><div class="ttname"><a href="class_wave_source_keyframe.html#a1d98f2353ed1314db13fe28782cce7f3">WaveSourceKeyframe::smoothInterpolate</a></div><div class="ttdeci">void smoothInterpolate(const WavetableKeyframe *prev_keyframe, const WavetableKeyframe *from_keyframe, const WavetableKeyframe *to_keyframe, const WavetableKeyframe *next_keyframe, float t) override</div><div class="ttdoc">Performs a smooth (cubic) interpolation using four keyframes for even smoother transitions.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:173</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a21b939df52c0df8a8d01dbf8aec1ffcd"><div class="ttname"><a href="class_wave_source_keyframe.html#a21b939df52c0df8a8d01dbf8aec1ffcd">WaveSourceKeyframe::cubicTimeInterpolate</a></div><div class="ttdeci">void cubicTimeInterpolate(const vital::WaveFrame *prev, const vital::WaveFrame *from, const vital::WaveFrame *to, const vital::WaveFrame *next, float range_prev, float range, float range_next, float t)</div><div class="ttdoc">Cubic interpolation in time domain using four WaveFrames for smooth transitions.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:69</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a25bf945cc7e05f3e24785e2c18f1ddf5"><div class="ttname"><a href="class_wave_source_keyframe.html#a25bf945cc7e05f3e24785e2c18f1ddf5">WaveSourceKeyframe::linearFrequencyInterpolate</a></div><div class="ttdeci">void linearFrequencyInterpolate(const vital::WaveFrame *from, const vital::WaveFrame *to, float t)</div><div class="ttdoc">Linear interpolation in frequency domain.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:82</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a42bb1c4473019173e7b0435aae21ea1a"><div class="ttname"><a href="class_wave_source_keyframe.html#a42bb1c4473019173e7b0435aae21ea1a">WaveSourceKeyframe::stateToJson</a></div><div class="ttdeci">json stateToJson() override</div><div class="ttdoc">Serializes the state of this keyframe to a JSON object.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:193</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a8375d5c3ffe9ecaaa9d3cffae9c1c649"><div class="ttname"><a href="class_wave_source_keyframe.html#a8375d5c3ffe9ecaaa9d3cffae9c1c649">WaveSourceKeyframe::setInterpolationMode</a></div><div class="ttdeci">void setInterpolationMode(WaveSource::InterpolationMode mode)</div><div class="ttdoc">Sets the interpolation mode for this keyframe.</div><div class="ttdef"><b>Definition</b> wave_source.h:188</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a90a5537b7612e577b7697443e9fc2025"><div class="ttname"><a href="class_wave_source_keyframe.html#a90a5537b7612e577b7697443e9fc2025">WaveSourceKeyframe::jsonToState</a></div><div class="ttdeci">void jsonToState(json data) override</div><div class="ttdoc">Restores the keyframe's state from a JSON object.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:201</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a91a03b2129322973ebe9cb8c72ba7b50"><div class="ttname"><a href="class_wave_source_keyframe.html#a91a03b2129322973ebe9cb8c72ba7b50">WaveSourceKeyframe::linearTimeInterpolate</a></div><div class="ttdeci">void linearTimeInterpolate(const vital::WaveFrame *from, const vital::WaveFrame *to, float t)</div><div class="ttdoc">Linearly interpolate two WaveFrames in the time domain.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:62</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_a99884fc97dc01f240686506e0eaea4f6"><div class="ttname"><a href="class_wave_source_keyframe.html#a99884fc97dc01f240686506e0eaea4f6">WaveSourceKeyframe::wave_frame_</a></div><div class="ttdeci">std::unique_ptr&lt; vital::WaveFrame &gt; wave_frame_</div><div class="ttdoc">The WaveFrame representing this keyframes waveform.</div><div class="ttdef"><b>Definition</b> wave_source.h:198</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_ac2f19ba59f1866a789cdeb38fef24e12"><div class="ttname"><a href="class_wave_source_keyframe.html#ac2f19ba59f1866a789cdeb38fef24e12">WaveSourceKeyframe::wave_frame</a></div><div class="ttdeci">vital::WaveFrame * wave_frame()</div><div class="ttdoc">Provides direct access to the stored WaveFrame.</div><div class="ttdef"><b>Definition</b> wave_source.h:107</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_ae736aa8a1e0efb5162022d4cae795729"><div class="ttname"><a href="class_wave_source_keyframe.html#ae736aa8a1e0efb5162022d4cae795729">WaveSourceKeyframe::cubicFrequencyInterpolate</a></div><div class="ttdeci">void cubicFrequencyInterpolate(const vital::WaveFrame *prev, const vital::WaveFrame *from, const vital::WaveFrame *to, const vital::WaveFrame *next, float range_prev, float range, float range_next, float t)</div><div class="ttdoc">Cubic interpolation in frequency domain using four WaveFrames.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:112</div></div>
<div class="ttc" id="aclass_wave_source_keyframe_html_aefa83b8a0623b6becd80c462236e014a"><div class="ttname"><a href="class_wave_source_keyframe.html#aefa83b8a0623b6becd80c462236e014a">WaveSourceKeyframe::interpolate</a></div><div class="ttdeci">void interpolate(const WavetableKeyframe *from_keyframe, const WavetableKeyframe *to_keyframe, float t) override</div><div class="ttdoc">Linearly interpolates between two keyframes.</div><div class="ttdef"><b>Definition</b> wave_source.cpp:162</div></div>
<div class="ttc" id="aclass_wavetable_component_factory_html_a22042886b7b3acd718509949040238bd"><div class="ttname"><a href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bd">WavetableComponentFactory::ComponentType</a></div><div class="ttdeci">ComponentType</div><div class="ttdoc">Enumerates all known WavetableComponents, including sources and modifiers.</div><div class="ttdef"><b>Definition</b> wavetable_component_factory.h:28</div></div>
<div class="ttc" id="aclass_wavetable_component_factory_html_a22042886b7b3acd718509949040238bda4abc444b080aeb6684a0305d20feed03"><div class="ttname"><a href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bda4abc444b080aeb6684a0305d20feed03">WavetableComponentFactory::kWaveSource</a></div><div class="ttdeci">@ kWaveSource</div><div class="ttdoc">A basic wave source.</div><div class="ttdef"><b>Definition</b> wavetable_component_factory.h:29</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a1c7bd3ba09cf3093d5aea225ee876b02"><div class="ttname"><a href="class_wavetable_component.html#a1c7bd3ba09cf3093d5aea225ee876b02">WavetableComponent::stateToJson</a></div><div class="ttdeci">virtual json stateToJson()</div><div class="ttdoc">Serializes the components state and all keyframes to a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_component.cpp:49</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a59b735ee67cc2281379418304de76b6d"><div class="ttname"><a href="class_wavetable_component.html#a59b735ee67cc2281379418304de76b6d">WavetableComponent::interpolate</a></div><div class="ttdeci">void interpolate(WavetableKeyframe *dest, float position)</div><div class="ttdoc">Interpolates a destination keyframe at a given position.</div><div class="ttdef"><b>Definition</b> wavetable_component.cpp:68</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a656616fbc4a9d37b7e76c4179f496196"><div class="ttname"><a href="class_wavetable_component.html#a656616fbc4a9d37b7e76c4179f496196">WavetableComponent::jsonToState</a></div><div class="ttdeci">virtual void jsonToState(json data)</div><div class="ttdoc">Restores the components state from a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_component.cpp:37</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a9186070f6ca3742cfd0ab22cbdcbb875"><div class="ttname"><a href="class_wavetable_component.html#a9186070f6ca3742cfd0ab22cbdcbb875">WavetableComponent::keyframes_</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; WavetableKeyframe &gt; &gt; keyframes_</div><div class="ttdoc">The list of keyframes sorted by position.</div><div class="ttdef"><b>Definition</b> wavetable_component.h:219</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html"><div class="ttname"><a href="class_wavetable_keyframe.html">WavetableKeyframe</a></div><div class="ttdoc">Represents a single state of a waveform at a specific position in a wavetable.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.h:35</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_a06dcc7e7c618cedfa746b46f7cc4c79e"><div class="ttname"><a href="class_wavetable_keyframe.html#a06dcc7e7c618cedfa746b46f7cc4c79e">WavetableKeyframe::linearTween</a></div><div class="ttdeci">static float linearTween(float point_from, float point_to, float t)</div><div class="ttdoc">Performs linear interpolation between two points.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:11</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_a0cb9189b60f53bacbbbf18cf99ca1c28"><div class="ttname"><a href="class_wavetable_keyframe.html#a0cb9189b60f53bacbbbf18cf99ca1c28">WavetableKeyframe::position</a></div><div class="ttdeci">int position() const</div><div class="ttdoc">Gets the wavetable frame position of this keyframe.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.h:81</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_a1936d535aa7d22f6281c86c56c38b6cd"><div class="ttname"><a href="class_wavetable_keyframe.html#a1936d535aa7d22f6281c86c56c38b6cd">WavetableKeyframe::cubicTween</a></div><div class="ttdeci">static float cubicTween(float point_prev, float point_from, float point_to, float point_next, float range_prev, float range, float range_next, float t)</div><div class="ttdoc">Performs cubic interpolation taking into account a previous and next point for smoother curves.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:16</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_ab12d53e98f7188d011cd3c69e86d2bda"><div class="ttname"><a href="class_wavetable_keyframe.html#ab12d53e98f7188d011cd3c69e86d2bda">WavetableKeyframe::stateToJson</a></div><div class="ttdeci">virtual json stateToJson()</div><div class="ttdoc">Serializes the state of this keyframe to a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:37</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_ad0e81b3bdc5fe9a3d901dec69d9b7b5b"><div class="ttname"><a href="class_wavetable_keyframe.html#ad0e81b3bdc5fe9a3d901dec69d9b7b5b">WavetableKeyframe::jsonToState</a></div><div class="ttdeci">virtual void jsonToState(json data)</div><div class="ttdoc">Restores the keyframe's state from a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:41</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html"><div class="ttname"><a href="classvital_1_1_wave_frame.html">vital::WaveFrame</a></div><div class="ttdoc">Represents a single frame of a wavetable, containing both time-domain and frequency-domain data.</div><div class="ttdef"><b>Definition</b> wave_frame.h:16</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a097b35df7e1e30b50991550a21d4927b"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a097b35df7e1e30b50991550a21d4927b">vital::WaveFrame::copy</a></div><div class="ttdeci">void copy(const WaveFrame *other)</div><div class="ttdoc">Copies another WaveFrame's time and frequency domain data into this one.</div><div class="ttdef"><b>Definition</b> wave_frame.cpp:57</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a53212ad525f9c40af4b71325f5a94810"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a53212ad525f9c40af4b71325f5a94810">vital::WaveFrame::frequency_domain</a></div><div class="ttdeci">std::complex&lt; float &gt; frequency_domain[kWaveformSize]</div><div class="ttdoc">The frequency-domain representation (complex spectrum).</div><div class="ttdef"><b>Definition</b> wave_frame.h:125</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a6b03ba41138003ebb4ddb158f8984c52"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a></div><div class="ttdeci">static constexpr int kWaveformSize</div><div class="ttdoc">The size of the waveform (number of samples per frame).</div><div class="ttdef"><b>Definition</b> wave_frame.h:21</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a8cd461490f5421877ab2846e1f03087d"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">vital::WaveFrame::time_domain</a></div><div class="ttdeci">mono_float time_domain[2 *kWaveformSize]</div><div class="ttdoc">The time-domain data, extended buffer size for FFT alignment.</div><div class="ttdef"><b>Definition</b> wave_frame.h:124</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_addeb13945e5fe1e653aa4b2edd487ede"><div class="ttname"><a href="classvital_1_1_wave_frame.html#addeb13945e5fe1e653aa4b2edd487ede">vital::WaveFrame::kNumRealComplex</a></div><div class="ttdeci">static constexpr int kNumRealComplex</div><div class="ttdoc">The number of real-valued frequency components (half the size + 1).</div><div class="ttdef"><b>Definition</b> wave_frame.h:23</div></div>
<div class="ttc" id="aline__generator_8h_html_a0c01dbde6677d7e4769b85716c69c491"><div class="ttname"><a href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdef"><b>Definition</b> line_generator.h:7</div></div>
<div class="ttc" id="awave__frame_8h_html"><div class="ttname"><a href="wave__frame_8h.html">wave_frame.h</a></div></div>
<div class="ttc" id="awave__source_8h_html"><div class="ttname"><a href="wave__source_8h.html">wave_source.h</a></div></div>
<div class="ttc" id="awavetable__component__factory_8h_html"><div class="ttname"><a href="wavetable__component__factory_8h.html">wavetable_component_factory.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_fdedb0aba14d44ce9d99bc100e026e6a.html">common</a></li><li class="navelem"><a class="el" href="dir_8a26e35b66d30874a2a12dd30526c662.html">wavetable</a></li><li class="navelem"><a class="el" href="wave__source_8cpp.html">wave_source.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
