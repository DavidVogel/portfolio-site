<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vital: /Users/davidvogel/repos/VitalHelp/src/common/wavetable/wave_fold_modifier.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DREY265MGG"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DREY265MGG",{})</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Vital
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('wave__fold__modifier_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">wave_fold_modifier.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="wave__fold__modifier_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">Summary:</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">WaveFoldModifier applies a nonlinear wave-folding effect to a wavetable’s time-domain waveform. By scaling and folding the waveform through sine and arcsine functions, it adds harmonic complexity and can create interesting timbral variations. Adjusting the fold boost parameter in keyframes and interpolating between them allows dynamic control over the amount of wave folding across the wavetable.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> */</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="wave__fold__modifier_8h.html">wave_fold_modifier.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="utils_8h.html">utils.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="wave__frame_8h.html">wave_frame.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="foldopen" id="foldopen00011" data-start="{" data-end="}">
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9abba553a1431935c9e9112570bbf146">   11</a></span><a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9abba553a1431935c9e9112570bbf146">WaveFoldModifier::WaveFoldModifierKeyframe::WaveFoldModifierKeyframe</a>() {</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>  <span class="comment">// Default fold boost set to 1.0 for neutral folding.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>  <a class="code hl_variable" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#ab985e3883b6bba6f346970902952f1ff">wave_fold_boost_</a> = 1.0f;</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>}</div>
</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="foldopen" id="foldopen00016" data-start="{" data-end="}">
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a499f32257167ea201fb4e6a90175afd4">   16</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a499f32257167ea201fb4e6a90175afd4">WaveFoldModifier::WaveFoldModifierKeyframe::copy</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* keyframe) {</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>* source = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>*<span class="keyword">&gt;</span>(keyframe);</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>  wave_fold_boost_ = source-&gt;<a class="code hl_variable" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#ab985e3883b6bba6f346970902952f1ff">wave_fold_boost_</a>;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>}</div>
</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="foldopen" id="foldopen00021" data-start="{" data-end="}">
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aefd1cc5d607c4cd525939461d65626fd">   21</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aefd1cc5d607c4cd525939461d65626fd">WaveFoldModifier::WaveFoldModifierKeyframe::interpolate</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* from_keyframe,</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>                                                             <span class="keyword">const</span> <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* to_keyframe,</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>                                                             <span class="keywordtype">float</span> t) {</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>* from = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>*<span class="keyword">&gt;</span>(from_keyframe);</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>  <span class="keyword">const</span> <a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>* to = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>*<span class="keyword">&gt;</span>(to_keyframe);</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>  <span class="comment">// Linearly interpolate the fold boost between two keyframes.</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  wave_fold_boost_ = linearTween(from-&gt;<a class="code hl_variable" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#ab985e3883b6bba6f346970902952f1ff">wave_fold_boost_</a>, to-&gt;<a class="code hl_variable" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#ab985e3883b6bba6f346970902952f1ff">wave_fold_boost_</a>, t);</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>}</div>
</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="foldopen" id="foldopen00031" data-start="{" data-end="}">
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a09b92f11e044c9190e112651dc8a96d4">   31</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a09b92f11e044c9190e112651dc8a96d4">WaveFoldModifier::WaveFoldModifierKeyframe::render</a>(<a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* wave_frame) {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  <span class="comment">// Wave-folding is achieved by scaling and mapping the waveform’s amplitude through a nonlinear transform.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>  <span class="keywordtype">float</span> max_value = std::max(1.0f, wave_frame-&gt;<a class="code hl_function" href="classvital_1_1_wave_frame.html#ae1248d7130215dbc4b4b71517103d49f">getMaxZeroOffset</a>());</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a>; ++i) {</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">// Clamp the waveform&#39;s value to [-1, 1] relative to max_value, then map through asin and sin to fold it.</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="keywordtype">float</span> value = <a class="code hl_function" href="namespacevital_1_1utils.html#a13a19cf68aa11afa58de96f14442003a">vital::utils::clamp</a>(wave_frame-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i] / max_value, -1.0f, 1.0f);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="keywordtype">float</span> adjusted_value = max_value * wave_fold_boost_ * asinf(value);</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    wave_frame-&gt;<a class="code hl_variable" href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">time_domain</a>[i] = sinf(adjusted_value);</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  }</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  wave_frame-&gt;<a class="code hl_function" href="classvital_1_1_wave_frame.html#a55389465c6dd32414e034d10834ff0ee">toFrequencyDomain</a>();</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>}</div>
</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="foldopen" id="foldopen00045" data-start="{" data-end="}">
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9459b06d71fca826aaee5d52ef63e3eb">   45</a></span><a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> <a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9459b06d71fca826aaee5d52ef63e3eb">WaveFoldModifier::WaveFoldModifierKeyframe::stateToJson</a>() {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>  <a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data = <a class="code hl_function" href="class_wavetable_keyframe.html#ab12d53e98f7188d011cd3c69e86d2bda">WavetableKeyframe::stateToJson</a>();</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  data[<span class="stringliteral">&quot;fold_boost&quot;</span>] = wave_fold_boost_;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keywordflow">return</span> data;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>}</div>
</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="foldopen" id="foldopen00051" data-start="{" data-end="}">
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aa7886b1c562c2aa5510fd115bef62574">   51</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aa7886b1c562c2aa5510fd115bef62574">WaveFoldModifier::WaveFoldModifierKeyframe::jsonToState</a>(<a class="code hl_typedef" href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a> data) {</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <a class="code hl_function" href="class_wavetable_keyframe.html#ad0e81b3bdc5fe9a3d901dec69d9b7b5b">WavetableKeyframe::jsonToState</a>(data);</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  wave_fold_boost_ = data[<span class="stringliteral">&quot;fold_boost&quot;</span>];</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>}</div>
</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="foldopen" id="foldopen00056" data-start="{" data-end="}">
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier.html#a624d0f22199f9e1fdb2ff83a500054ac">   56</a></span><a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* <a class="code hl_function" href="class_wave_fold_modifier.html#a624d0f22199f9e1fdb2ff83a500054ac">WaveFoldModifier::createKeyframe</a>(<span class="keywordtype">int</span> position) {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <span class="comment">// Interpolate the fold boost parameter from the component’s keyframe list at the given position.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>* keyframe = <span class="keyword">new</span> <a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifierKeyframe</a>();</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <a class="code hl_function" href="class_wavetable_component.html#a59b735ee67cc2281379418304de76b6d">interpolate</a>(keyframe, position);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="keywordflow">return</span> keyframe;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>}</div>
</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="foldopen" id="foldopen00063" data-start="{" data-end="}">
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier.html#a9cbd51ff2113edc3e2766d051034fcab">   63</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_wave_fold_modifier.html#a9cbd51ff2113edc3e2766d051034fcab">WaveFoldModifier::render</a>(<a class="code hl_class" href="classvital_1_1_wave_frame.html">vital::WaveFrame</a>* wave_frame, <span class="keywordtype">float</span> position) {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="comment">// Interpolate parameters for this position and apply the folding transformation.</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  <a class="code hl_function" href="class_wavetable_component.html#a59b735ee67cc2281379418304de76b6d">interpolate</a>(&amp;<a class="code hl_variable" href="class_wave_fold_modifier.html#aa4c700d6c35683661d70ef713c9d0cb7">compute_frame_</a>, position);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <a class="code hl_variable" href="class_wave_fold_modifier.html#aa4c700d6c35683661d70ef713c9d0cb7">compute_frame_</a>.<a class="code hl_function" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a09b92f11e044c9190e112651dc8a96d4">render</a>(wave_frame);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>}</div>
</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="foldopen" id="foldopen00069" data-start="{" data-end="}">
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier.html#a9a4ae0b9c577978c4b1841d47dc633e7">   69</a></span><a class="code hl_enumeration" href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bd">WavetableComponentFactory::ComponentType</a> <a class="code hl_function" href="class_wave_fold_modifier.html#a9a4ae0b9c577978c4b1841d47dc633e7">WaveFoldModifier::getType</a>() {</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bda40cd2c1668934a6aebe089400dedfcde">WavetableComponentFactory::kWaveFolder</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>}</div>
</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="foldopen" id="foldopen00073" data-start="{" data-end="}">
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="class_wave_fold_modifier.html#a53b4c100b59a8ab602cad94744ea6d94">   73</a></span><a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifier::WaveFoldModifierKeyframe</a>* <a class="code hl_function" href="class_wave_fold_modifier.html#a53b4c100b59a8ab602cad94744ea6d94">WaveFoldModifier::getKeyframe</a>(<span class="keywordtype">int</span> index) {</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  <a class="code hl_class" href="class_wavetable_keyframe.html">WavetableKeyframe</a>* wavetable_keyframe = <a class="code hl_variable" href="class_wavetable_component.html#a9186070f6ca3742cfd0ab22cbdcbb875">keyframes_</a>[index].get();</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifier::WaveFoldModifierKeyframe</a>*<span class="keyword">&gt;</span>(wavetable_keyframe);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>}</div>
</div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html">WaveFoldModifier::WaveFoldModifierKeyframe</a></div><div class="ttdoc">A keyframe class that stores the fold boost parameter for wave-folding at a given position.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.h:28</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_a09b92f11e044c9190e112651dc8a96d4"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a09b92f11e044c9190e112651dc8a96d4">WaveFoldModifier::WaveFoldModifierKeyframe::render</a></div><div class="ttdeci">void render(vital::WaveFrame *wave_frame) override</div><div class="ttdoc">Renders the waveform of this keyframe into a WaveFrame.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:31</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_a499f32257167ea201fb4e6a90175afd4"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a499f32257167ea201fb4e6a90175afd4">WaveFoldModifier::WaveFoldModifierKeyframe::copy</a></div><div class="ttdeci">void copy(const WavetableKeyframe *keyframe) override</div><div class="ttdoc">Copies the state from another keyframe of the same type.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:16</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_a9459b06d71fca826aaee5d52ef63e3eb"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9459b06d71fca826aaee5d52ef63e3eb">WaveFoldModifier::WaveFoldModifierKeyframe::stateToJson</a></div><div class="ttdeci">json stateToJson() override</div><div class="ttdoc">Serializes the state of this keyframe to a JSON object.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:45</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_a9abba553a1431935c9e9112570bbf146"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#a9abba553a1431935c9e9112570bbf146">WaveFoldModifier::WaveFoldModifierKeyframe::WaveFoldModifierKeyframe</a></div><div class="ttdeci">WaveFoldModifierKeyframe()</div><div class="ttdoc">Constructs a keyframe with a default wave fold boost value of 1.0.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:11</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_aa7886b1c562c2aa5510fd115bef62574"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aa7886b1c562c2aa5510fd115bef62574">WaveFoldModifier::WaveFoldModifierKeyframe::jsonToState</a></div><div class="ttdeci">void jsonToState(json data) override</div><div class="ttdoc">Restores the keyframe's state from a JSON object.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:51</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_ab985e3883b6bba6f346970902952f1ff"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#ab985e3883b6bba6f346970902952f1ff">WaveFoldModifier::WaveFoldModifierKeyframe::wave_fold_boost_</a></div><div class="ttdeci">float wave_fold_boost_</div><div class="ttdoc">The factor by which the wave is folded.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.h:60</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_1_1_wave_fold_modifier_keyframe_html_aefd1cc5d607c4cd525939461d65626fd"><div class="ttname"><a href="class_wave_fold_modifier_1_1_wave_fold_modifier_keyframe.html#aefd1cc5d607c4cd525939461d65626fd">WaveFoldModifier::WaveFoldModifierKeyframe::interpolate</a></div><div class="ttdeci">void interpolate(const WavetableKeyframe *from_keyframe, const WavetableKeyframe *to_keyframe, float t) override</div><div class="ttdoc">Linearly interpolates between two keyframes.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:21</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_html_a53b4c100b59a8ab602cad94744ea6d94"><div class="ttname"><a href="class_wave_fold_modifier.html#a53b4c100b59a8ab602cad94744ea6d94">WaveFoldModifier::getKeyframe</a></div><div class="ttdeci">WaveFoldModifierKeyframe * getKeyframe(int index)</div><div class="ttdoc">Retrieves a WaveFoldModifierKeyframe at a given index.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:73</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_html_a624d0f22199f9e1fdb2ff83a500054ac"><div class="ttname"><a href="class_wave_fold_modifier.html#a624d0f22199f9e1fdb2ff83a500054ac">WaveFoldModifier::createKeyframe</a></div><div class="ttdeci">WavetableKeyframe * createKeyframe(int position) override</div><div class="ttdoc">Creates a new keyframe at a given position.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:56</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_html_a9a4ae0b9c577978c4b1841d47dc633e7"><div class="ttname"><a href="class_wave_fold_modifier.html#a9a4ae0b9c577978c4b1841d47dc633e7">WaveFoldModifier::getType</a></div><div class="ttdeci">WavetableComponentFactory::ComponentType getType() override</div><div class="ttdoc">Returns the type of this WavetableComponent.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:69</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_html_a9cbd51ff2113edc3e2766d051034fcab"><div class="ttname"><a href="class_wave_fold_modifier.html#a9cbd51ff2113edc3e2766d051034fcab">WaveFoldModifier::render</a></div><div class="ttdeci">void render(vital::WaveFrame *wave_frame, float position) override</div><div class="ttdoc">Renders the waveform at a given position into a WaveFrame.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.cpp:63</div></div>
<div class="ttc" id="aclass_wave_fold_modifier_html_aa4c700d6c35683661d70ef713c9d0cb7"><div class="ttname"><a href="class_wave_fold_modifier.html#aa4c700d6c35683661d70ef713c9d0cb7">WaveFoldModifier::compute_frame_</a></div><div class="ttdeci">WaveFoldModifierKeyframe compute_frame_</div><div class="ttdoc">A keyframe for intermediate computations.</div><div class="ttdef"><b>Definition</b> wave_fold_modifier.h:84</div></div>
<div class="ttc" id="aclass_wavetable_component_factory_html_a22042886b7b3acd718509949040238bd"><div class="ttname"><a href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bd">WavetableComponentFactory::ComponentType</a></div><div class="ttdeci">ComponentType</div><div class="ttdoc">Enumerates all known WavetableComponents, including sources and modifiers.</div><div class="ttdef"><b>Definition</b> wavetable_component_factory.h:28</div></div>
<div class="ttc" id="aclass_wavetable_component_factory_html_a22042886b7b3acd718509949040238bda40cd2c1668934a6aebe089400dedfcde"><div class="ttname"><a href="class_wavetable_component_factory.html#a22042886b7b3acd718509949040238bda40cd2c1668934a6aebe089400dedfcde">WavetableComponentFactory::kWaveFolder</a></div><div class="ttdeci">@ kWaveFolder</div><div class="ttdoc">Modifier that applies wave folding.</div><div class="ttdef"><b>Definition</b> wavetable_component_factory.h:40</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a59b735ee67cc2281379418304de76b6d"><div class="ttname"><a href="class_wavetable_component.html#a59b735ee67cc2281379418304de76b6d">WavetableComponent::interpolate</a></div><div class="ttdeci">void interpolate(WavetableKeyframe *dest, float position)</div><div class="ttdoc">Interpolates a destination keyframe at a given position.</div><div class="ttdef"><b>Definition</b> wavetable_component.cpp:68</div></div>
<div class="ttc" id="aclass_wavetable_component_html_a9186070f6ca3742cfd0ab22cbdcbb875"><div class="ttname"><a href="class_wavetable_component.html#a9186070f6ca3742cfd0ab22cbdcbb875">WavetableComponent::keyframes_</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; WavetableKeyframe &gt; &gt; keyframes_</div><div class="ttdoc">The list of keyframes sorted by position.</div><div class="ttdef"><b>Definition</b> wavetable_component.h:219</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html"><div class="ttname"><a href="class_wavetable_keyframe.html">WavetableKeyframe</a></div><div class="ttdoc">Represents a single state of a waveform at a specific position in a wavetable.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.h:35</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_ab12d53e98f7188d011cd3c69e86d2bda"><div class="ttname"><a href="class_wavetable_keyframe.html#ab12d53e98f7188d011cd3c69e86d2bda">WavetableKeyframe::stateToJson</a></div><div class="ttdeci">virtual json stateToJson()</div><div class="ttdoc">Serializes the state of this keyframe to a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:37</div></div>
<div class="ttc" id="aclass_wavetable_keyframe_html_ad0e81b3bdc5fe9a3d901dec69d9b7b5b"><div class="ttname"><a href="class_wavetable_keyframe.html#ad0e81b3bdc5fe9a3d901dec69d9b7b5b">WavetableKeyframe::jsonToState</a></div><div class="ttdeci">virtual void jsonToState(json data)</div><div class="ttdoc">Restores the keyframe's state from a JSON object.</div><div class="ttdef"><b>Definition</b> wavetable_keyframe.cpp:41</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html"><div class="ttname"><a href="classvital_1_1_wave_frame.html">vital::WaveFrame</a></div><div class="ttdoc">Represents a single frame of a wavetable, containing both time-domain and frequency-domain data.</div><div class="ttdef"><b>Definition</b> wave_frame.h:16</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a55389465c6dd32414e034d10834ff0ee"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a55389465c6dd32414e034d10834ff0ee">vital::WaveFrame::toFrequencyDomain</a></div><div class="ttdeci">void toFrequencyDomain()</div><div class="ttdoc">Converts the currently loaded time-domain data into frequency-domain representation.</div><div class="ttdef"><b>Definition</b> wave_frame.cpp:64</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a6b03ba41138003ebb4ddb158f8984c52"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a6b03ba41138003ebb4ddb158f8984c52">vital::WaveFrame::kWaveformSize</a></div><div class="ttdeci">static constexpr int kWaveformSize</div><div class="ttdoc">The size of the waveform (number of samples per frame).</div><div class="ttdef"><b>Definition</b> wave_frame.h:21</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_a8cd461490f5421877ab2846e1f03087d"><div class="ttname"><a href="classvital_1_1_wave_frame.html#a8cd461490f5421877ab2846e1f03087d">vital::WaveFrame::time_domain</a></div><div class="ttdeci">mono_float time_domain[2 *kWaveformSize]</div><div class="ttdoc">The time-domain data, extended buffer size for FFT alignment.</div><div class="ttdef"><b>Definition</b> wave_frame.h:124</div></div>
<div class="ttc" id="aclassvital_1_1_wave_frame_html_ae1248d7130215dbc4b4b71517103d49f"><div class="ttname"><a href="classvital_1_1_wave_frame.html#ae1248d7130215dbc4b4b71517103d49f">vital::WaveFrame::getMaxZeroOffset</a></div><div class="ttdeci">mono_float getMaxZeroOffset() const</div><div class="ttdoc">Retrieves the maximum absolute amplitude in the time-domain waveform.</div><div class="ttdef"><b>Definition</b> wave_frame.cpp:30</div></div>
<div class="ttc" id="aline__generator_8h_html_a0c01dbde6677d7e4769b85716c69c491"><div class="ttname"><a href="line__generator_8h.html#a0c01dbde6677d7e4769b85716c69c491">json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdef"><b>Definition</b> line_generator.h:7</div></div>
<div class="ttc" id="anamespacevital_1_1utils_html_a13a19cf68aa11afa58de96f14442003a"><div class="ttname"><a href="namespacevital_1_1utils.html#a13a19cf68aa11afa58de96f14442003a">vital::utils::clamp</a></div><div class="ttdeci">force_inline poly_float clamp(poly_float value, mono_float min, mono_float max)</div><div class="ttdoc">Clamps each lane of a vector to [min, max].</div><div class="ttdef"><b>Definition</b> poly_utils.h:306</div></div>
<div class="ttc" id="autils_8h_html"><div class="ttname"><a href="utils_8h.html">utils.h</a></div><div class="ttdoc">Provides various utility functions, classes, and constants for audio, math, and general-purpose opera...</div></div>
<div class="ttc" id="awave__fold__modifier_8h_html"><div class="ttname"><a href="wave__fold__modifier_8h.html">wave_fold_modifier.h</a></div></div>
<div class="ttc" id="awave__frame_8h_html"><div class="ttname"><a href="wave__frame_8h.html">wave_frame.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_fdedb0aba14d44ce9d99bc100e026e6a.html">common</a></li><li class="navelem"><a class="el" href="dir_8a26e35b66d30874a2a12dd30526c662.html">wavetable</a></li><li class="navelem"><a class="el" href="wave__fold__modifier_8cpp.html">wave_fold_modifier.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
