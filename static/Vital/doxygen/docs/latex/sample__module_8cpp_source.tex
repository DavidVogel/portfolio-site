\doxysection{sample\+\_\+module.\+cpp}
\hypertarget{sample__module_8cpp_source}{}\label{sample__module_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/sample\_module.cpp@{/Users/davidvogel/repos/VitalHelp/src/synthesis/modules/sample\_module.cpp}}
\mbox{\hyperlink{sample__module_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sample__module_8h}{sample\_module.h}}"{}}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__constants_8h}{synth\_constants.h}}"{}}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacevital}{vital}}\ \{}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00009\ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_abd4a604a8f1278f46fc85e7d4cc2921c}{SampleModule::SampleModule}}()\ :\ \mbox{\hyperlink{classvital_1_1_synth_module}{SynthModule}}(kNumInputs,\ kNumOutputs),\ on\_(nullptr)\ \{}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classvital_1_1_sample_source}{SampleSource}}();}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a90665d68caf255b8a1bed8c9f16ad9a7}{was\_on\_}}\ =\ std::make\_shared<bool>(\textcolor{keyword}{true});}
\DoxyCodeLine{00012\ \ \ \ \ \}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_sample_module_aaf855337b0b0efb442d390c7af35db1a}{SampleModule::init}}()\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a08731d779920b2cc86188046ccb5dd46}{on\_}}\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_on"{}});}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ random\_phase\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_random\_phase"{}});}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ loop\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_loop"{}});}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ bounce\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_bounce"{}});}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ keytrack\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_keytrack"{}});}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_value}{Value}}*\ transpose\_quantize\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a3829cadfd1dfc7802119541ca1753d69}{createBaseControl}}(\textcolor{stringliteral}{"{}sample\_transpose\_quantize"{}});}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ transpose\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}sample\_transpose"{}});}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ tune\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}sample\_tune"{}});}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ level\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}sample\_level"{}},\ \textcolor{keyword}{true},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1_output}{Output}}*\ pan\ =\ \mbox{\hyperlink{classvital_1_1_synth_module_a170876a577ad1f0f7bd4b1cbb581b1aa}{createPolyModControl}}(\textcolor{stringliteral}{"{}sample\_pan"{}});}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Connect\ inputs\ to\ the\ sampler.}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a78efa1437ab306088d67a66f681b12e5}{useInput}}(\mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(\mbox{\hyperlink{classvital_1_1_sample_module_a0a43b970d4d1ab58cb934c6a9528f64da6048fddeecdecba71f9a46fc58d15a1c}{kReset}}),\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dade5f23c031a1ace67ff2ca0de17f5438}{SampleSource::kReset}});}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a78efa1437ab306088d67a66f681b12e5}{useInput}}(\mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(\mbox{\hyperlink{classvital_1_1_sample_module_a0a43b970d4d1ab58cb934c6a9528f64da3c278737ea3fdba877de47e3f498739f}{kMidi}}),\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dac805a4437c37ec64847df1c072604ac1}{SampleSource::kMidi}});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a78efa1437ab306088d67a66f681b12e5}{useInput}}(\mbox{\hyperlink{classvital_1_1_processor_a6785b9361f8b2fd7638c6a02483ec9eb}{input}}(\mbox{\hyperlink{classvital_1_1_sample_module_a0a43b970d4d1ab58cb934c6a9528f64daf19d2a55605a70553be94e9c63565437}{kNoteCount}}),\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dac4c2f065a9c33385074ad9d2d35b8501}{SampleSource::kNoteCount}});}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Connect\ control\ parameters\ to\ the\ sampler.}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(random\_phase,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303da53753e60c1e8abeed9b5e2266fb87790}{SampleSource::kRandomPhase}});}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(keytrack,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303da70141ac7facee83b4771406d92bd16e7}{SampleSource::kKeytrack}});}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(loop,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dac657f4e7ab09d24cb40d1d83d5a212ed}{SampleSource::kLoop}});}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(bounce,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dae575f487d4096a433c285de96f276f56}{SampleSource::kBounce}});}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(transpose,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303daf98b24ada3f28a0a598f1cf9b3e87750}{SampleSource::kTranspose}});}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(transpose\_quantize,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303daa78016b62556195f1a2e6aacfb0f42ee}{SampleSource::kTransposeQuantize}});}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(tune,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303da9a677a55f49e2b31e33734d1585d06e3}{SampleSource::kTune}});}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(level,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303da5cd354dbf27ea98582c0ba3218ae2328}{SampleSource::kLevel}});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a99005e6f52c7289c548a51065582e3ac}{plug}}(pan,\ \mbox{\hyperlink{classvital_1_1_sample_source_a44532436d52a446d78bef1280bc9303dad82fee29d33f14964002bbb033f051be}{SampleSource::kPan}});}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Map\ sampler\ outputs.}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a4ab8d1bebcc9b45ae4eefb1f0ea20d77}{useOutput}}(\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_sample_module_a73cf6b87c726628e47eed13085af1611ac54c5fa083835c388dd2b85b1b84a343}{kRaw}}),\ \mbox{\hyperlink{classvital_1_1_sample_source_adcb31cdb5576f256080f7c4c50bcd7b6a98f6c24f3831fcb157ef864fb0ccef2c}{SampleSource::kRaw}});}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}}-\/>\mbox{\hyperlink{classvital_1_1_processor_a4ab8d1bebcc9b45ae4eefb1f0ea20d77}{useOutput}}(\mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_sample_module_a73cf6b87c726628e47eed13085af1611abacb8ab07b821f6730998b608a8f561b}{kLevelled}}),\ \mbox{\hyperlink{classvital_1_1_sample_source_adcb31cdb5576f256080f7c4c50bcd7b6ad82a9bb6962395160fd5ab1b7e6594ea}{SampleSource::kLevelled}});}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_router_af5322ce72a1e53f6d81ce917f07427e7}{addProcessor}}(\mbox{\hyperlink{classvital_1_1_sample_module_a7eaec2701305409c2faab1cfd923e10b}{sampler\_}});}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_adb6eaa40b95275a42029ed4c0c4bcba4}{SynthModule::init}}();}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classvital_1_1_sample_module_a4718cd6bac61e0190a690a065c0c5925}{SampleModule::process}}(\textcolor{keywordtype}{int}\ num\_samples)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ on\ =\ \mbox{\hyperlink{classvital_1_1_sample_module_a08731d779920b2cc86188046ccb5dd46}{on\_}}-\/>\mbox{\hyperlink{classvital_1_1_value_abb1c46e9f067933eed8c3af6b11d0b9a}{value}}();}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (on)}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_aa88622055da34fca35bb4192d524dd9d}{SynthModule::process}}(num\_samples);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (*\mbox{\hyperlink{classvital_1_1_sample_module_a90665d68caf255b8a1bed8c9f16ad9a7}{was\_on\_}})\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clear\ outputs\ if\ we're\ turning\ off\ the\ sample.}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_sample_module_a73cf6b87c726628e47eed13085af1611ac54c5fa083835c388dd2b85b1b84a343}{kRaw}})-\/>\mbox{\hyperlink{structvital_1_1_output_a07358331a3e6f461a3243c1f3d58b6ef}{clearBuffer}}();}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_processor_ab09651265a7270548b77e99b1316fde0}{output}}(\mbox{\hyperlink{classvital_1_1_sample_module_a73cf6b87c726628e47eed13085af1611abacb8ab07b821f6730998b608a8f561b}{kLevelled}})-\/>\mbox{\hyperlink{structvital_1_1_output_a07358331a3e6f461a3243c1f3d58b6ef}{clearBuffer}}();}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvital_1_1_sample_module_a142ab1221f76c97b4c04c9b2e108e49e}{getPhaseOutput}}()-\/>\mbox{\hyperlink{structvital_1_1_output_a1bc2c3a75ee0525ecbfb24fc841b1fe4}{buffer}}[0]\ =\ 0.0f;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{classvital_1_1_sample_module_a90665d68caf255b8a1bed8c9f16ad9a7}{was\_on\_}}\ =\ on;}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \}\ \textcolor{comment}{//\ namespace\ vital}}

\end{DoxyCode}
