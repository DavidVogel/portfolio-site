\doxysection{line\+\_\+map\+\_\+editor.\+cpp}
\hypertarget{line__map__editor_8cpp_source}{}\label{line__map__editor_8cpp_source}\index{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_components/line\_map\_editor.cpp@{/Users/davidvogel/repos/VitalHelp/src/interface/editor\_components/line\_map\_editor.cpp}}
\mbox{\hyperlink{line__map__editor_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{line__map__editor_8h}{line\_map\_editor.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{skin_8h}{skin.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{shaders_8h}{shaders.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{synth__gui__interface_8h}{synth\_gui\_interface.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{utils_8h}{utils.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \mbox{\hyperlink{class_line_map_editor_a85a016d8578f9290c22b6e3a6a730ee1}{LineMapEditor::LineMapEditor}}(\mbox{\hyperlink{class_line_generator}{LineGenerator}}*\ line\_source,\ String\ name)\ :\ \mbox{\hyperlink{class_line_editor}{LineEditor}}(line\_source)\ \{}
\DoxyCodeLine{00009\ \ \ animate\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00010\ \ \ raw\_input\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00011\ \ \ last\_phase\_\ =\ 0.0f;}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a2370751b939ff421b5ad9049ce7e008d}{setFill}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00014\ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a189b7b9f30f4d7e46095ad96df34489e}{setFillCenter}}(-\/1.0f);}
\DoxyCodeLine{00015\ \ \ \mbox{\hyperlink{class_line_editor_a2022ba744ff9becc370dadc8316e730f}{setLoop}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00016\ \ \ setName(name);}
\DoxyCodeLine{00017\ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a5009bf6a1b7b6fc2e1d7cb077db2145e}{setBoostAmount}}(0.0f);}
\DoxyCodeLine{00018\ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a320bfdf74261a460c79ba0a8eb464297}{setFillBoostAmount}}(0.0f);}
\DoxyCodeLine{00019\ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \mbox{\hyperlink{class_line_map_editor_a6f14762810cb03cf7333da1b39506734}{LineMapEditor::\string~LineMapEditor}}()\ \{\ \}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_line_map_editor_aaae8f8dc1d0bf8feec001e44b5ff3cd0}{LineMapEditor::parentHierarchyChanged}}()\ \{}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{class_synth_gui_interface}{SynthGuiInterface}}*\ parent\ =\ findParentComponentOfClass<SynthGuiInterface>();}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \textcolor{keywordflow}{if}\ (parent\ \&\&\ raw\_input\_\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00027\ \ \ \ \ raw\_input\_\ =\ parent-\/>\mbox{\hyperlink{class_synth_gui_interface_a4e948c6a5558b838582d7476f079251d}{getSynth}}()-\/>\mbox{\hyperlink{class_synth_base_add97643be1ba341314ac1b158206dc4b}{getStatusOutput}}(getName().toStdString());}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \mbox{\hyperlink{class_open_gl_component_af9fb26cee075fba78305a7e79b53008d}{LineEditor::parentHierarchyChanged}}();}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_line_map_editor_a49643774a5f77d515b21627b35cde718}{LineMapEditor::render}}(\mbox{\hyperlink{struct_open_gl_wrapper}{OpenGlWrapper}}\&\ open\_gl,\ \textcolor{keywordtype}{bool}\ animate)\ \{}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{class_line_editor_aab19ed03fb2a6051de6ca202feaac605}{setGlPositions}}();}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{class_line_editor_a0dd2d0c4d12de68b100210fcc8c461e2}{renderGrid}}(open\_gl,\ animate);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_aa6fb221f264f39c93c973656445b5bea}{setLineWidth}}(\mbox{\hyperlink{class_open_gl_component_aabfea74619ee336cb31ea174c56d2c67}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180a0706c2f54d7b90b90c5e3141c4ea3e39}{Skin::kWidgetLineWidth}}));}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ Colour\ envelope\_graph\_fill\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca759c8acbffc8962e9ee2d8cba9677e73}{Skin::kWidgetSecondary1}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00039\ \ \ Colour\ envelope\_graph\_fill\_stereo\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127caf0e70a44ed7ab9d5dbef16a856b50cfb}{Skin::kWidgetSecondary2}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keywordtype}{float}\ fill\_fade\ =\ \mbox{\hyperlink{class_open_gl_component_aabfea74619ee336cb31ea174c56d2c67}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180a5268c3e135a7b246af15add8577ea3ac}{Skin::kWidgetFillFade}});}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_line_editor_a0dc5d2fdcb5e5ea69212cc3c1b68d26a}{active\_}})\ \{}
\DoxyCodeLine{00043\ \ \ \ \ envelope\_graph\_fill\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca8c72cd53e923c259556519e2210b1d6a}{Skin::kWidgetSecondaryDisabled}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00044\ \ \ \ \ envelope\_graph\_fill\_stereo\ =\ envelope\_graph\_fill;}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ \ \ Colour\ envelope\_graph\_fill\_fade\ =\ envelope\_graph\_fill.withMultipliedAlpha(1.0f\ -\/\ fill\_fade);}
\DoxyCodeLine{00047\ \ \ Colour\ envelope\_graph\_fill\_stereo\_fade\ =\ envelope\_graph\_fill\_stereo.withMultipliedAlpha(1.0f\ -\/\ fill\_fade);}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ Colour\ position\_color\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca57224e1a8b8454d64ee7092f63b89420}{Skin::kWidgetPrimary1}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00050\ \ \ Colour\ position\_color\_stereo\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca52527c370464bf967aac85bb7c22a5ab}{Skin::kWidgetPrimary2}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00051\ \ \ Colour\ center\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127cabbaf3da4792c5389424b537b943e52ac}{Skin::kWidgetCenterLine}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_line_editor_a0dc5d2fdcb5e5ea69212cc3c1b68d26a}{active\_}})\ \{}
\DoxyCodeLine{00053\ \ \ \ \ position\_color\ =\ findColour(\mbox{\hyperlink{class_skin_a7dc2a5a0b040e6ca38c7e5c236b4127ca4f6dbca7fdb5224fc3d7e4beb68970fc}{Skin::kWidgetPrimaryDisabled}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00054\ \ \ \ \ center\ =\ position\_color;}
\DoxyCodeLine{00055\ \ \ \ \ position\_color\_stereo\ =\ position\_color;}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{keywordflow}{if}\ (animate\ \&\&\ animate\_)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Animated\ mode:\ decay\ boosts\ and\ update\ positions.}}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a291a3b43c9a3f692ef2fd7989a2a5148}{decayBoosts}}(\mbox{\hyperlink{class_line_map_editor_a6ab696a8b6c4ca6f7bcfd407a00cd669}{kTailDecay}});}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__float}{vital::poly\_float}}\ phase\ =\ raw\_input\_-\/>\mbox{\hyperlink{classvital_1_1_status_output_adc2827a952fdcedd4ba84d1e3b793240}{value}}();}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{if}\ (!raw\_input\_-\/>\mbox{\hyperlink{classvital_1_1_status_output_acfb390df9f235c3cd2e694c2b8293af8}{isClearValue}}(phase))\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \mbox{\hyperlink{structvital_1_1poly__float}{vital::poly\_float}}\ adjusted\_phase\ =\ \mbox{\hyperlink{class_line_editor_a0d0ec4a62b8830f7afd1bb998b2b4531}{adjustBoostPhase}}(phase);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab885c7fae9b135539ab4e1541097800f}{boostRange}}(last\_phase\_,\ adjusted\_phase,\ \mbox{\hyperlink{class_line_editor_a84b2887dc814aaa98c67496956b414e5}{kNumWrapPoints}},\ \mbox{\hyperlink{class_line_map_editor_a6ab696a8b6c4ca6f7bcfd407a00cd669}{kTailDecay}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ last\_phase\_\ =\ adjusted\_phase;}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a2370751b939ff421b5ad9049ce7e008d}{setFill}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a5009bf6a1b7b6fc2e1d7cb077db2145e}{setBoostAmount}}(\mbox{\hyperlink{class_open_gl_component_aabfea74619ee336cb31ea174c56d2c67}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180a9c9397bfae636bb4478a9f360d91bba0}{Skin::kWidgetLineBoost}}));}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a320bfdf74261a460c79ba0a8eb464297}{setFillBoostAmount}}(\mbox{\hyperlink{class_open_gl_component_aabfea74619ee336cb31ea174c56d2c67}{findValue}}(\mbox{\hyperlink{class_skin_a65ea929118e660a168d02af741c29180aa1c1e074ba7cbe057c9a24baa1ad84fa}{Skin::kWidgetFillBoost}}));}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ stereo\ line\ variant.}}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_aeecc118f10773a802ba5b26c7f152fdc}{setIndex}}(1);}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(position\_color\_stereo);}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a8f1edffc163ebb29305d10f4f91eef33}{setFillColors}}(envelope\_graph\_fill\_stereo\_fade,\ envelope\_graph\_fill\_stereo);}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ace33179a7e0636d04f0226f87b7258aa}{drawLines}}(open\_gl,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Draw\ the\ main\ line\ variant.}}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_aeecc118f10773a802ba5b26c7f152fdc}{setIndex}}(0);}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(position\_color);}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a8f1edffc163ebb29305d10f4f91eef33}{setFillColors}}(envelope\_graph\_fill\_fade,\ envelope\_graph\_fill);}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ace33179a7e0636d04f0226f87b7258aa}{drawLines}}(open\_gl,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a2370751b939ff421b5ad9049ce7e008d}{setFill}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a5009bf6a1b7b6fc2e1d7cb077db2145e}{setBoostAmount}}(0.0f);}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a320bfdf74261a460c79ba0a8eb464297}{setFillBoostAmount}}(0.0f);}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(center);}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{class_line_editor_a1eec12f3df90ba877ca0ce9f1d37c536}{LineEditor::render}}(open\_gl,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \mbox{\hyperlink{class_open_gl_component_a0641317fa0d502284c603188bb7da9a7}{setViewPort}}(open\_gl);}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ Draw\ position\ indicators\ for\ both\ stereo\ voices\ if\ applicable.}}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{class_line_editor_ac91f850123f6738190d402fdc89d123f}{drawPosition}}(open\_gl,\ position\_color\_stereo,\ phase[1]);}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{class_line_editor_ac91f850123f6738190d402fdc89d123f}{drawPosition}}(open\_gl,\ position\_color,\ phase[0]);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Non-\/animated\ mode:\ draw\ the\ lines\ statically.}}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a5009bf6a1b7b6fc2e1d7cb077db2145e}{setBoostAmount}}(0.0f);}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a320bfdf74261a460c79ba0a8eb464297}{setFillBoostAmount}}(0.0f);}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a291a3b43c9a3f692ef2fd7989a2a5148}{decayBoosts}}(0.0f);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a2370751b939ff421b5ad9049ce7e008d}{setFill}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(position\_color\_stereo);}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a8f1edffc163ebb29305d10f4f91eef33}{setFillColors}}(envelope\_graph\_fill\_stereo\_fade,\ envelope\_graph\_fill\_stereo);}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ace33179a7e0636d04f0226f87b7258aa}{drawLines}}(open\_gl,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(position\_color);}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a8f1edffc163ebb29305d10f4f91eef33}{setFillColors}}(envelope\_graph\_fill\_fade,\ envelope\_graph\_fill);}
\DoxyCodeLine{00109\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ace33179a7e0636d04f0226f87b7258aa}{drawLines}}(open\_gl,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_a2370751b939ff421b5ad9049ce7e008d}{setFill}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ab5d0f4d954c1f93976f1875145424f84}{setColor}}(center);}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{class_open_gl_line_renderer_ace33179a7e0636d04f0226f87b7258aa}{drawLines}}(open\_gl,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{class_line_editor_ae17c347d018abdfc556e88c8a54b2f4b}{renderPoints}}(open\_gl,\ animate);}
\DoxyCodeLine{00117\ \ \ \mbox{\hyperlink{class_open_gl_component_a5c6aa6d7c8a20882ce3b621efbf7e18b}{renderCorners}}(open\_gl,\ animate);}
\DoxyCodeLine{00118\ \}}

\end{DoxyCode}
